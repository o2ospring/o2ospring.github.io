<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>linux 编译构建工具 - o2ospring</title><meta name="Description" content="linux 编译构建工具使用"><meta property="og:title" content="linux 编译构建工具" />
<meta property="og:description" content="linux 编译构建工具使用" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://o2ospring.github.io/20200915/" /><meta property="og:image" content="https://o2ospring.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-15T21:33:41+08:00" />
<meta property="article:modified_time" content="2022-07-17T22:58:00+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://o2ospring.github.io/logo.png"/>

<meta name="twitter:title" content="linux 编译构建工具"/>
<meta name="twitter:description" content="linux 编译构建工具使用"/>
<meta name="application-name" content="o2ospring">
<meta name="apple-mobile-web-app-title" content="o2ospring"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://o2ospring.github.io/20200915/" /><link rel="prev" href="https://o2ospring.github.io/20200913/" /><link rel="next" href="https://o2ospring.github.io/20200916/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "linux 编译构建工具",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/o2ospring.github.io\/20200915\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/o2ospring.github.io\/images\/Apple-Devices-Preview.png",
                            "width":  3200 ,
                            "height":  2048 
                        }],"genre": "posts","keywords": "编译, GNU, GCC, linux 工具\/应用","wordcount":  31810 ,
        "url": "https:\/\/o2ospring.github.io\/20200915\/","datePublished": "2020-09-15T21:33:41+08:00","dateModified": "2022-07-17T22:58:00+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/o2ospring.github.io\/images\/avatar.png",
                    "width":  528 ,
                    "height":  560 
                }},"author": {
                "@type": "Person",
                "name": "o2ospring"
            },"description": "linux 编译构建工具使用"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="o2ospring"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>o2ospring&#39;s blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/about/"> 关于 </a><a class="menu-item" href="https://github.com/o2ospring" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="o2ospring"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>o2ospring&#39;s blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/about/" title="">关于</a><a class="menu-item" href="https://github.com/o2ospring" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">linux 编译构建工具</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://github.com/o2ospring" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>o2ospring</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/linux/"><i class="far fa-folder fa-fw"></i>linux</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2020-09-15">2020-09-15</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 31810 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 64 分钟&nbsp;<span id="/20200915/" class="leancloud_visitors" data-flag-title="linux 编译构建工具">
                        <i class="far fa-eye fa-fw"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;次阅读
                    </span>&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#前言">前言</a></li>
        <li><a href="#一gcc-编译器">一、gcc 编译器</a></li>
        <li><a href="#二交叉编译器">二、交叉编译器</a></li>
        <li><a href="#三makemakefile-脚本">三、make+Makefile 脚本</a></li>
        <li><a href="#四相关的编译构建工具">四、相关的编译构建工具</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h3 id="前言">前言</h3>
<p>Linux 下可用的编译器有 GCC、LLVM-clang、EGCS 和 PGCC，其中 GCC 是绝对的老大（不接受反驳）！<a href="http://gcc.gnu.org/" target="_blank" rel="noopener noreffer">GCC</a>（GNU Compiler Collection）是由 <a href="https://www.gnu.org/" target="_blank" rel="noopener noreffer">GNU</a> 开发的编程语言译器套件。GNU 编译器套件包括 C、C++、Objective-C、Fortran、Ada、Go 及 D 语言前端，也包括了这些语言的库（如：libstdc++，libgcj 等）</p>
<details close=""><summary>1、关于工具链关系</summary>  
<blockquote>
<p>●<code>CMake</code>是一种跨平台编译构建工具（也就是项目构建生成工具），其将程序员编写 CMakeLists.txt 文件转化 makefile 文件，最后调用 make 命令执行相关工作。<br>
●<code>make</code>是一个脚本工具（也就是项目构建工具/编译批处理工具），用于解释执行 Makefile 脚本的命令工具。<br>
●<code>makefile</code>是脚本语言，用于描述了整个工程的编译、链接等规则，调用 GCC（也可以是其它编译器，如：clang）命令执行编译、链接动作。<br>
●<code>gcc</code>是编译器，用于编译源文件，链接生成执行文件。<br>
●<code>gdb</code>是调试器，用于调试 c/c++ 程序，也可以调试 Ada、Objective-C、Pascal 及其它语言。</p>
</blockquote>
</details>  
<details close=""><summary>2、关于交叉编译器</summary>  
<blockquote>
<p>GNU 的 GCC 主要用于编译电脑软件，主要针对 x86 体系的处理器；对于 ARM 、MIPS 等体系的处理器，我们需要使用交叉编译器（如：arm-none-linux-gnueabi-gcc）来编译，其过程：先在电脑上使用交叉编译器编译生成执行文件，再将执行文件复制/烧录到控制板上运行。</p>
</blockquote>
</details>  
<details close=""><summary>3、工具或源码下载</summary>  
<table>
<thead>
<tr>
<th style="text-align:center">工具</th>
<th style="text-align:center">源码包</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">make</td>
<td style="text-align:center"><a href="http://ftp.gnu.org/gnu/make/" target="_blank" rel="noopener noreffer">官网下载</a>、<a href="https://mirrors.tuna.tsinghua.edu.cn/gnu/make/" target="_blank" rel="noopener noreffer">清华镜像</a></td>
</tr>
<tr>
<td style="text-align:center"><a href="http://gcc.gnu.org/" target="_blank" rel="noopener noreffer">gcc</a></td>
<td style="text-align:center"><a href="http://ftp.gnu.org/gnu/gcc/" target="_blank" rel="noopener noreffer">官网下载</a>、<a href="https://mirrors.tuna.tsinghua.edu.cn/gnu/gcc/" target="_blank" rel="noopener noreffer">清华镜像</a></td>
</tr>
</tbody>
</table>
</details>  
<h3 id="一gcc-编译器">一、gcc 编译器</h3>
<details close=""><summary>1、linux 系统下安装 ●</summary>  
<p>1.1、Ubuntu 系统下的在线安装</p>
<blockquote>
<p>在 Ubuntu 下安装 GCC 和其他一些 Linux 系统有点不一样。默认的 Ubuntu 存储库包含一个名为<code>build-essential</code>的元包，它包含 GCC 编译器以及编译软件所需的许多库和其他实用程序。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">#####方法一#####</span>
sudo apt update                  <span class="c1">#首先更新包列表，</span>
sudo apt install build-essential <span class="c1">#安装`build-essential`软件包，</span>
gcc --version                    <span class="c1">#查看 gcc 版本用于验证是否安装成功。</span>

<span class="c1">#####方法二#####</span>
<span class="c1"># sudo apt-get build-dep gcc     #安装`gcc`</span>
<span class="c1"># gcc -v                         #查看 gcc 版本用于验证是否安装成功。</span>

<span class="c1">#####方法三#####</span>
<span class="c1"># sudo apt-get install gcc       #安装`gcc`</span>
<span class="c1"># sudo apt-get install g++       #安装`g++`</span>
<span class="c1"># gcc -v                         #查看 gcc 版本用于验证是否安装成功。</span>
</code></pre></td></tr></table>
</div>
</div><p>1.2、Ubuntu 下在线安装最新版</p>
<blockquote>
<p>因为个别工程需要多个 GCC 的编译器或者是库来支持，我们可能需要在同一个 Linux 系统当中安装多个 GCC 版本来实现支持的目的。从低版本到高版本，以及最新版本的 GCC，都可从 Ubuntu Toolchain PPA 获得。虽然 Ubuntu 官方软件仓库尽可能囊括所有的开源软件，但仍有很多软件包由于各种原因不能进入官方软件仓库，为了方便 Ubuntu 用户使用，Ubuntu 为软件开发者提供了 <a href="https://launchpad.net/" target="_blank" rel="noopener noreffer">launchpad</a> 平台来创建自己的 repositories（仓库）提供了个人软件包集，即 PPA（Personal Package Archives）个人软件包档案。从网上找到的 <a href="https://launchpad.net/~ubuntu-toolchain-r/&#43;archive/ubuntu/test" target="_blank" rel="noopener noreffer">ppa:ubuntu-toolchain-r/test</a> 支持很多 gcc 版本，列表【Package】项表示 gcc 软件包名称，【Version】项表示具体版本及支持 Ubuntu 版本，例如：版本<code>10.3.0-1ubuntu1~20.04</code>表示 gcc 10.3.0 以及支持 Ubuntu 20.04（备注：原以为支持 1~20.04 全部版本，结果测试 Ubuntu 16.04 提示找不到软件包，即是只支持 Ubuntu 20.04）。其实从 gcc 官网也找到此作者的仓库，其路径：<a href="https://gcc.gnu.org" target="_blank" rel="noopener noreffer">https://gcc.gnu.org</a>&gt;&gt;Download&gt;&gt;Binaries → GFortran Wiki → GNU/Linux&gt;&gt;Most Linux distributions offer gfortran packages → Ubuntu&gt;&gt;minor updates（小更新）或 new testing versions（新的测试版本）。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">#####安装仓库以及gcc方法#####</span>
sudo apt install software-properties-common          <span class="c1">#安装`PPA`仓库工具（只需安装一次）</span>
sudo add-apt-repository ppa:ubuntu-toolchain-r/test  <span class="c1">#加入`PPA`仓库</span>
sudo apt update                                      <span class="c1">#更新`PPA`仓库信息</span>
sudo apt install gcc-9 g++-9                         <span class="c1">#安装`GCC`和`G++`(需要安装什么版本就输入什么版本)</span>
                                                     <span class="c1">#如果没找到软件包，则提示“E: Unable to locate package XXX”</span>
<span class="c1">#####加gcc版本优先级方法#####                           #注意要把之前在环境变量加入的软件执行文件路径移除，否则可能会冲突！</span>
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-9 <span class="m">90</span>  --slave /usr/bin/g++ g++ /usr/bin/g++-9
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-5 <span class="m">999</span> --slave /usr/bin/g++ g++ /usr/bin/g++-5
                                                     <span class="c1">#备注：①我的系统 Ubuntu 16.04 已安装：gcc 5.4.0；②上面的 --slave 的 g++ 表示的工作版本由 gcc 配置决定</span>
<span class="c1">#####选择gcc工作版本方法#####</span>
sudo update-alternatives --config gcc                <span class="c1">#选择gcc工作版本，根据界面提示输入对应数字+回车选择</span>

<span class="c1">#####移除专用PPA仓库方法#####</span>
sudo add-apt-repository --remove ppa:ubuntu-toolchain-r/test
                                                     <span class="c1">#移除上面加入的PPA仓库</span>
<span class="c1">#####移除gcc某优先级方法#####</span>
sudo update-alternatives --remove gcc /usr/bin/gcc-9 <span class="c1">#移除 gcc 9 的优先级（将从优先级列表中移除）</span>
</code></pre></td></tr></table>
</div>
</div><p>1.3、Ubuntu 下自己编译与安装</p>
<blockquote>
<p>待续……</p>
</blockquote>
<!--  
解压版：如果系统上没有编译器，则需要下载已编译好的二进制 GCC 软件包来安装使用。  
源码版：系统中必须要有 cc 或者 gcc 等编译器，下载源码编译安装。  
  
[详解Linux安装GCC方法](https://www.cnblogs.com/dybk/p/8085685.html)  
[Linux 安装GCC讲解(在线和无网离线)](https://mp.weixin.qq.com/s/gFyN54-_lQm_OwIStIlNOg)  
[自己编译安装](https://blog.csdn.net/qq_42683011/article/details/114271908)  
-->  
</details>  
<details close=""><summary>2、windows 下安装 ●</summary>  
<p>2.1、可选工具：</p>
<blockquote>
<p>● GNU 并没提供 Windows 的 GCC 版本，但我们可以安装第三方制作的 GCC Windows 版本，其中集成 GCC 编译器的软件主要有：<a href="http://www.mingw.org" target="_blank" rel="noopener noreffer">MinGW</a>/<a href="https://www.mingw-w64.org" target="_blank" rel="noopener noreffer">MinGW-w64</a>、<a href="http://tdm-gcc.tdragon.net" target="_blank" rel="noopener noreffer">TDM-GCC</a>、<a href="http://www.cygwin.com" target="_blank" rel="noopener noreffer">Cygwin</a>。</p>
</blockquote>
<p>2.2、工具区别：</p>
<blockquote>
<p>● <a href="http://www.mingw.org" target="_blank" rel="noopener noreffer">MinGW</a>/<a href="https://www.mingw-w64.org" target="_blank" rel="noopener noreffer">MinGW-w64</a>（Minimalist GNU for Windows）是为 windows 系统打造的编译器套件，其主要是把 GNU 的 gcc、make 等编译工具移植到 Windows 平台下，使得原是在 linux 写的 C 源代码可以在 windows 上编译及运行（exe 执行文件）。<br>
● <a href="http://tdm-gcc.tdragon.net" target="_blank" rel="noopener noreffer">TDM-GCC</a> 衍生自 MinGW 和 MinGW-w64 的项目（功能是一样的），也是分为 32 位与 64 位两个版本，32 位版本的编译目标仅兼容 32 位应用程序，64 位版本的编译目标兼容 32 和 64 位应用程序。TDM-GCC 对比 MinGW-w64 会集成更新的 gcc 编译器，目前集成的版本为 GCC 10.3.0。<br>
● <a href="http://www.cygwin.com/" target="_blank" rel="noopener noreffer">Cygwin</a> 是一个在 windows 平台上运行的类 unix 模拟环境，其集成绝大部分的 linux 软件包（其中就包括 GCC 编译工具）。</p>
</blockquote>
<p>2.3、工具特点：</p>
<blockquote>
<p>● <a href="http://www.cygwin.com/" target="_blank" rel="noopener noreffer">Cygwin</a> 大而全面，提供完整的类 Unix 环境，凡是在 Cygwin 环境中编译构建的软件在运行时必须依赖 cygwin1.dll 库文件。<br>
● <a href="http://www.mingw.org" target="_blank" rel="noopener noreffer">MinGW</a> / <a href="https://www.mingw-w64.org" target="_blank" rel="noopener noreffer">MinGW-w64</a> / <a href="http://tdm-gcc.tdragon.net" target="_blank" rel="noopener noreffer">TDM-GCC</a> 小而高效，其主要是编译器，一般只支持编译使用 C/C++ 标准库的程序。</p>
</blockquote>
<p>2.4、工具安装：</p>
<blockquote>
<p>● 关于 <a href="http://www.cygwin.com/" target="_blank" rel="noopener noreffer">Cygwin</a> 的安装与使用，请移步《<a href="../20220227" rel="">linux-工具-linux 模拟环境 cygwin</a>》。<br>
● 关于 <a href="https://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/mingw-builds/" target="_blank" rel="noopener noreffer">MinGW-w64</a> 的安装与使用，请移步《<a href="../20220428" rel="">MinGW-w64 编译套件(GNU 工具集)</a>》。<br>
● 下载 <a href="https://jmeubank.github.io/tdm-gcc/download" target="_blank" rel="noopener noreffer">TDM-GCC 编译工具</a>，不需要勾选检测是否最新版本，直接点击<code>Creat</code>安装即可，最后在命令窗口输入<code>gcc -v</code>可查看 gcc 版本。特别说明：查看 make 版本的命令为<code>mingw32-make -v</code>。</p>
</blockquote>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="../img/20200915_10.jpg"
        data-srcset="../img/20200915_10.jpg, ../img/20200915_10.jpg 1.5x, ../img/20200915_10.jpg 2x"
        data-sizes="auto"
        alt="../img/20200915_10.jpg"
        title="下载安装" /></p>
</details>  
<details close=""><summary>3、GCC 的编译方法 ●</summary>  
<p>3.1、一步编译方法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">gcc -o hello hello.c              <span class="c1"># 1步完成:预处理-&gt;编译-&gt;汇编-&gt;链接（可多个C文件编译）</span>
</code></pre></td></tr></table>
</div>
</div><p>3.2、两步编译方法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">gcc -c -o hello.o hello.c -I./inc <span class="c1"># 编译  (生成二进制机器码) → Makefile 中一般都是使用两步编译方式（[-I]为源文件的包含文件所在路径(如:头文件所在路径[./inc])）（绝大部分选项参数都在编译这里设置）</span>
gcc    -o hello   hello.o         <span class="c1"># 链接  (生成可执行文件)　 → Makefile 中一般都是使用两步编译方式（链接时常用选项参数：-Txxx.lds  -Wl,-Map=xxx.map,--cref  -Wl,--gc-sections）</span>
</code></pre></td></tr></table>
</div>
</div><p>3.3、多步编译方法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">#      ┌→指定生成文件名         （可多个C文件编译）</span>
gcc -E -o hello.i hello.c         <span class="c1"># 预处理(经过预处理的C原始程序) ┐</span>
gcc -S -o hello.s hello.i         <span class="c1"># 编译  (编译生成汇编语言代码)  ├→ ★助记★: 选项-&gt;ESc, 生成文件-&gt;iso</span>
gcc -c -o hello.o hello.s         <span class="c1"># 汇编  (汇编生成二进制机器码)  ┘</span>
gcc    -o hello   hello.o         <span class="c1"># 链接  (链接生成可执行文件)</span>
</code></pre></td></tr></table>
</div>
</div></details>  
<details close=""><summary>4、GCC 的编译参数 ●</summary>  
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span><span class="lnt">96
</span><span class="lnt">97
</span><span class="lnt">98
</span><span class="lnt">99
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 一些编译常用选项</span>
gcc --version                     <span class="c1"># 查看gcc版本</span>
gcc -v                            <span class="c1"># 查看gcc版本(包括配置参数信息)</span>
gcc -x c xxxx.b -x none hello.c   <span class="c1"># 忽略文件类型强制以C文件类型编译[xxxx.b]，自动识别文件类型编译[hello.c]</span>
gcc -std<span class="o">=</span>c99 hello.c -o hello     <span class="c1"># 使用[C99]标准编译（gcc 默认使用的是 C89 的标准，而 -std=gun99 是 GNU 的 C99，及 -std=gnu11 是 C11 与 GNU 的拓展））</span>
gcc -static  hello.c -o hello     <span class="c1"># 静态编译生成的可执行文件(优点:独立无依赖,缺点:文件很大)</span>
gcc -g       hello.c -o hello     <span class="c1"># 在可执行程序中包含标准调试信息</span>
gcc -O2      hello.c -o hello     <span class="c1"># 用[-O2]优化选项编译生成可执行文件(常用优化级别:-O0,-O1,-O2,-O3)</span>
                                  <span class="c1"># (扩展:-Og,-Os)(-Og是在O1的基础上去掉那些影响调试的优化,-Os是-O2基本上尽量编译出小体积程序)</span>
<span class="c1"># GCC警告提示常用选项</span>
gcc -w        wrong.c -o wrong    <span class="c1"># [-w]        关闭所有警告　　　（w小写）</span>
gcc -W        wrong.c -o wrong    <span class="c1"># [-W]        开启认为错误的警告（W大写）</span>
gcc -Werror   wrong.c -o wrong    <span class="c1"># [-Werror]   开启将警告转换成错误（主要用于排除警告代码）</span>
gcc -Wall     wrong.c -o wrong    <span class="c1"># [-Wall]     开启所有警告（建议读者养成使用该选项的习惯）</span>
gcc -W -Wall  wrong.c -o wrong    <span class="c1"># [-W -Wall]  开启常规警告（建议读者养成使用该选项的习惯）</span>
gcc -ansi     wrong.c -o wrong    <span class="c1"># [-ansi]     该选项强制GCC生成标准语法所要求的告警信息</span>
gcc -pedantic wrong.c -o wrong    <span class="c1"># [-pedantic] 该选项允许发出 ANSI C 标准所列的全部警告信息</span>
                                  <span class="c1"># 更多参数：https://blog.csdn.net/laifengyuan1/article/details/108662522</span>
<span class="c1"># 生成依赖信息（非编译，主要用于 Makefile）</span>
gcc -M     -I./inc main.c         <span class="c1"># 生成完整的头文件依赖关系，如生成: main.o: main.c main.h /usr/include/stdc-predef.h /usr/include/stdio.h</span>
gcc -MM    -I./inc main.c         <span class="c1"># 生成不包含系统头文件的依赖关系，如生成: main.o: main.c main.h</span>
gcc -E -M  -I./inc main.c         <span class="c1"># 同上面对应命令，且 -E 表示强调只是预处理，不做编译动作</span>
gcc -E -MM -I./inc main.c         <span class="c1"># 同上面对应命令，且 -E 表示强调只是预处理，不做编译动作</span>
gcc -MMD -MP -MF<span class="s2">&#34;out/x.d&#34;</span> -I./inc main.c <span class="c1"># 直接生成依赖关系信息文件[x.d]，可在编译过程中同时生成，从而提高效率（-MMD:生成默认依赖关系信息文件,-MP:信息中同时生成头文件伪目标,-MF:更改依赖关系信息文件路径及名称）</span>

<span class="c1"># --------------------------动/静态库编译方法:-----------------------</span>
<span class="c1">#【静态库】编译方法：</span>
gcc -c -o zzz.o zzz.c -I.                <span class="c1"># 两步编译方法：一、生成的目标文件， [r] 更新及替换,（replace）</span>
ar rcs libzzz.a zzz.o xxx.o              <span class="c1"># 两步编译方法：二、打包成为静态库。 [c] 创建静态库,（create）</span>
nm libzzz.a                              <span class="c1"># 查看库中包含的函数全局变量等信息。 [s] 及建立索引。</span>

<span class="c1">#【静态库】使用简介：</span>
gcc -o <span class="nb">test</span> test.c -I. ./libzzz.a        <span class="c1"># 方式一：直接指定静态库文件名称及路径与源文件一同编译。</span>
gcc -o <span class="nb">test</span> test.c -I. -L. -l:libzzz.a   <span class="c1"># 方式二：直接指定静态库文件名称及通过[-L]指出路径与源文件一同编译。</span>
gcc -o <span class="nb">test</span> test.c -I. -L. -lzzz         <span class="c1"># 方式三：通过[-l]指定静态库文件名称及通过[-L]指出路径与源文件一同编译。</span>
                                         <span class="c1">#【特别注意】：</span>
                                         <span class="c1"># &gt;&gt;&gt;&gt; 库文件必须书写到源文件及中间文件的后面，否则会编译出错，说找不到调用函数！！！</span>
                                         <span class="c1"># [-I] 为源文件的包含文件所在路径（如：[-I.]头文件所在当目录）（I:Include、L:Location、l:library）</span>
                                         <span class="c1"># [-L] 为告知链接器库文件所在路径（如：[-L.]库文件所在当目录）</span>
                                         <span class="c1"># [-l] 为指定库文件名称，两种方式（如：[-lzzz]库文件名称为&#34;libzzz.so&#34;或&#34;libzzz.a&#34;，[-l:libzzz.a]库文件名称为&#34;libzzz.a&#34;）</span>
                                         <span class="c1">#【扩展知识】：</span>
                                         <span class="c1"># [/lib]或[/usr/lib] 设置库路径方法(1)：系统默认搜索库目录，库文件要放到此目录，否则程序编译时找不到库，最后在命令窗口输入命令生效配置（sudo ldconfig）</span>
                                         <span class="c1"># [LIBRARY_PATH]     设置库路径方法(2)：修改静态库环境变量，在命令窗口输入命令临时追加库路径（如：export LIBRARY_PATH=$LIBRARY_PATH:~/lib）</span>
                                         <span class="c1"># [参考网文](https://blog.csdn.net/daidaihema/article/details/80902012)</span>
                                         <span class="c1"># [参考网文](https://blog.csdn.net/m0_38032942/article/details/111158489)</span>
                                         <span class="c1"># [参考网文](https://blog.csdn.net/hyl999/article/details/108642313)</span>
<span class="c1"># --------------------------------------</span>
<span class="c1">#【动态库】编译方法：</span>
gcc -fPIC -shared zzz.c -o libzzz.so     <span class="c1"># 一步编译方法：一步直接生成动态库。 [.so]     共享对象(共享库/动态链接库)（shared object）</span>

gcc -fPIC -c      zzz.c -o zzz.o         <span class="c1"># 两步编译方法：一、生成的目标文件， [-fPIC]   编译为位置无关码，[相对地址,为编译共享库(动态库)准备]（Position Independent Code）</span>
gcc       -shared zzz.o -o libzzz.so     <span class="c1"># 两步编译方法：二、生成动态链接库。 [-share]  编译为动态链接库。[共享对象/共享库/动态链接库]</span>

<span class="c1">#【动态库】使用简介：</span>
gcc -o <span class="nb">test</span> test.c -I. ./libzzz.so       <span class="c1"># 方式一：直接指定静态库文件名称及路径与源文件一同编译。</span>
gcc -o <span class="nb">test</span> test.c -I. -L. -l:libzzz.so  <span class="c1"># 方式二：直接指定静态库文件名称及通过[-L]指出路径与源文件一同编译。</span>
gcc -o <span class="nb">test</span> test.c -I. -L. -lzzz         <span class="c1"># 方式三：通过[-l]指定静态库文件名称及通过[-L]指出路径与源文件一同编译。</span>
                                         <span class="c1">#【特别注意】：</span>
                                         <span class="c1"># &gt;&gt;&gt;&gt; 库文件必须书写到源文件及中间文件的后面，否则会编译出错，说找不到调用函数！！！</span>
                                         <span class="c1"># [-I] 为源文件的包含文件所在路径（如：[-I.]头文件所在当目录）（I:Include、L:Location、l:library）</span>
                                         <span class="c1"># [-L] 为告知链接器库文件所在路径（如：[-L.]库文件所在当目录）</span>
                                         <span class="c1"># [-l] 为指定库文件名称，两种方式（如：[-lzzz]库文件名称为&#34;libzzz.so&#34;或&#34;libzzz.a&#34;，[-l:libzzz.so]库文件名称为&#34;libzzz.so&#34;）</span>
                                         <span class="c1">#【扩展知识】：</span>
                                         <span class="c1"># [/lib]或[/usr/lib] 设置库路径方法(1)：系统默认搜索库目录，库文件要放到此目录，否则程序运行时找不到库，最后在命令窗口输入命令生效配置（sudo ldconfig）</span>
                                         <span class="c1"># [LD_LIBRARY_PATH]  设置库路径方法(2)：修改动态库环境变量，使用文本编辑器打开系统环境配置文件（如：/etc/profile），在其里面最后追加库路径（如：export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:~/lib），最后在命令窗口输入命令生效配置（如：source /etc/profile）</span>
                                         <span class="c1"># [/etc/ld.so.conf]  设置库路径方法(3)：修改动态库配置文件，使用文本编辑器打开它，在其里面最后添加库路径（如：~/lib），最后在命令窗口输入命令生效配置（sudo ldconfig）</span>
                                         <span class="c1"># [参考网文](https://mp.weixin.qq.com/s/31UN152prQdMHPGrMiC53Q)</span>
<span class="c1"># --------------------------------------</span>
<span class="c1">#【标准库】中常用库：</span>
-lm           <span class="c1"># 数学库（math）</span>
-lc           <span class="c1"># 标准C库（C lib）</span>

<span class="c1"># --------------------------选项参数综合展示:-----------------------</span>
<span class="c1"># 链接、编译、汇编相关选项参数</span>
<span class="nv">CFLAG_L</span> <span class="o">=</span>    -mcpu<span class="o">=</span>cortex-m3 -mthumb -specs<span class="o">=</span>nano.specs -Wl,--gc-sections -TSTM32F103XB_FLASH.ld -Wl,-Map<span class="o">=</span>stm32f103.map,--cref
<span class="nv">CFLAG_O</span> <span class="o">=</span> -c -mcpu<span class="o">=</span>cortex-m3 -mthumb -fdata-sections -ffunction-sections -DUSE_HAL_DRIVER -Wa,-a,-ad,-alms<span class="o">=</span><span class="k">$(</span>@:.o<span class="o">=</span>.lst<span class="k">)</span> -Wall -Og -I./inc
<span class="nv">AFLAG_O</span> <span class="o">=</span> -c -mcpu<span class="o">=</span>cortex-m3 -mthumb -fdata-sections -ffunction-sections -DUSE_HAL_DRIVER
<span class="nv">CFLAG_M</span> <span class="o">=</span> -MMD -MP -MF<span class="s2">&#34;</span><span class="k">$(</span>@:%.o<span class="o">=</span>%.d<span class="k">)</span><span class="s2">&#34;</span>
<span class="c1"># 目标文件 → 执行文件</span>
<span class="k">$(</span>TARGET<span class="k">)</span>.elf: <span class="k">$(</span>OBJS<span class="k">)</span> <span class="k">$(</span>LIBS<span class="k">)</span>
	@<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAG_L<span class="k">)</span> -o <span class="nv">$@</span> <span class="k">$(</span>filter %.o, $^<span class="k">)</span> <span class="k">$(</span>LIBS<span class="k">)</span> -lc -lm -lnosys
<span class="c1"># 源码文件 → 目标文件</span>
<span class="k">$(</span>OBJS_D<span class="k">)</span>%.o: %.c
	@<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAG_O<span class="k">)</span> <span class="k">$(</span>CFLAG_M<span class="k">)</span> $&lt; -o <span class="nv">$@</span>
<span class="c1"># 汇编文件 → 目标文件</span>
<span class="k">$(</span>OBJS_D<span class="k">)</span>%.o: %.s
	@<span class="k">$(</span>AS<span class="k">)</span> <span class="k">$(</span>AFLAG_O<span class="k">)</span> <span class="k">$(</span>CFLAG_M<span class="k">)</span> $&lt; -o <span class="nv">$@</span>

<span class="c1"># --------------------------相关文件后缀补充:-----------------------</span>
.c            <span class="c1"># C原始程序</span>
.C/.cc/.cxx   <span class="c1"># C++原始程序</span>
.m            <span class="c1"># Objective C原始程序</span>
.i            <span class="c1"># 已经过预处理的C原始程序       ┐</span>
.ii           <span class="c1"># 已经过预处理的C++原始程序     ├→ ★助记★: 生成文件-&gt;iso</span>
.s/.S         <span class="c1"># 汇编语言原始程序              │</span>
.o            <span class="c1"># 目标文件(二进制机器码)        ┘</span>
.a/.so        <span class="c1"># 编译后的库文件(共享库(动态库)的后缀名由“.so”和版本号组成，静态库的后缀名为“.a”)</span>
              <span class="c1">#               (如: 数学共享库的库名为“libm.so.5”，这里的标识字符为m，版本号为5，</span>
              <span class="c1">#                                      “libm.a” 则是静态数学库)</span>
</code></pre></td></tr></table>
</div>
</div></details>  
<details close=""><summary>5、GCC 的编译图解 ●</summary>  
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="../img/20200915_11.jpg"
        data-srcset="../img/20200915_11.jpg, ../img/20200915_11.jpg 1.5x, ../img/20200915_11.jpg 2x"
        data-sizes="auto"
        alt="../img/20200915_11.jpg"
        title="编译图解" /></p>
</details>  
<h3 id="二交叉编译器">二、交叉编译器</h3>
<details close=""><summary>1、交叉编译器命名规则 ●</summary>  
<details close=""><summary>1.1、arch(架构)-vendor(厂商)-os(系统)-eabi(接口)</summary>  
<table>
<thead>
<tr>
<th style="text-align:left">分类</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">arch（架构）</td>
<td style="text-align:left">体系架构：ARM 、MIPS、x86 等</td>
</tr>
<tr>
<td style="text-align:left">vendor（厂商）</td>
<td style="text-align:left">工具链的供应商：苹果、none（无供应商）等</td>
</tr>
<tr>
<td style="text-align:left">os（系统）</td>
<td style="text-align:left">目标的操作系统：linux、none（裸机）等</td>
</tr>
<tr>
<td style="text-align:left">eabi（接口）</td>
<td style="text-align:left">嵌入式应用二进制接口：eabi、gnueabi 等</td>
</tr>
</tbody>
</table>
<hr>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">arch   <span class="c1"># &#39;ɑːrtʃ</span>
vendor <span class="c1"># &#39;vendə(r)</span>
eabi   <span class="c1"># Embedded Application Binary Interface</span>
       <span class="c1"># ɪm&#39;bedɪd            &#39;baɪnəri</span>
</code></pre></td></tr></table>
</div>
</div></details>  
<details close=""><summary>1.2、abi 与 eabi 的区别</summary>  
<blockquote>
<p>● <strong>ABI</strong>： 二进制应用程序接口。在计算机中，应用二进制接口描述了应用程序（或者其他类型）和操作系统之间或其他应用程序的低级接口。<br>
● <strong>EABI</strong>：嵌入式 ABI。嵌入式应用二进制接口指定了文件格式、数据类型、寄存器使用、堆积组织优化和在一个嵌入式软件中的参数的标准约定。开发者使用自己的汇编语言也可以使用 EABI 作为与兼容的编译器生成的汇编语言的接口。<br>
● <strong>两者区别总结</strong>：ABI 用于计算机上，EABI 用于嵌入式平台上（如 ARM，MIPS 等）。</p>
</blockquote>
</details>  
</details>  
<details close=""><summary>2、arm 框架交叉编译器 ●</summary>  
<details close=""><summary>2.1、armcc</summary>  
<blockquote>
<p><strong>armcc</strong> 是 ARM 公司推出的商用收费编译工具，功能和 arm-none-eabi-gcc 类似，用于编译裸机程序（u-boot、kernel、单片机程序），但是不能编译 Linux 应用程序。armcc 一般和 ARM 开发工具一起，例如 Keil MDK、ADS、RVDS 和 DS-5 中的编译器都是 armcc。</p>
</blockquote>
</details>  
<details close=""><summary>2.2、arm-none-eabi-gcc</summary>  
<blockquote>
<p><strong><a href="https://developer.arm.com/Tools%20and%20Software/GNU%20Toolchain" target="_blank" rel="noopener noreffer">arm-none-eabi-gcc</a></strong> 为 ARM 框架、无供应商、无系统、嵌入式二进制接口的交叉编译器，一般适合 ARM7、Cortex-M、Cortex-R 内核的芯片使用，它使用的是 newlib 这个专用于嵌入式系统的 C 库，用于编译裸机程序（u-boot、kernel、单片机程序），但是不能编译 Linux 应用程序。注意：交叉编译器目前都是 32 位执行程序，依赖 32 位库，事前需要安装 ia32-libs（<a href="https://blog.csdn.net/hj74535099/article/details/50220207" target="_blank" rel="noopener noreffer">网文</a>）或 <a href="https://pkgs.org/download/lsb-core" target="_blank" rel="noopener noreffer">lsb-core</a>。进入网页选择你需要的版本下载：<a href="https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/downloads" target="_blank" rel="noopener noreffer">官网最新版</a>、<a href="https://developer.arm.com/downloads/-/gnu-rm" target="_blank" rel="noopener noreffer">官网 2021 版</a>、<a href="https://launchpad.net/gcc-arm-embedded/&#43;download" target="_blank" rel="noopener noreffer">Ubuntu-launchpad 软件开发者平台</a> 及依赖 <a href="https://pkgs.org/download/lsb-core" target="_blank" rel="noopener noreffer">lsb-core</a>。补充：关于 Windows 版本，为直接安装文件，双击安装即可，还有安装后需要手工加入环境变量【<a href="../img/20200915_2_2_22.jpg" rel="">如图</a>】。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">wget https://launchpad.net/gcc-arm-embedded/5.0/5-2016-q3-update/+download/gcc-arm-none-eabi-5_4-2016q3-20160926-linux.tar.bz2 <span class="c1">#下载交叉编译器压缩包</span>
sudo tar -xjvf gcc-arm-none-eabi-5_4-2016q3-20160926-linux.tar.bz2 -C /usr/lib/gcc <span class="c1">#将交叉编译器压缩包解压到：/usr/lib/gcc</span>
sudo gedit /etc/profile             <span class="c1">#打开环境变量,在文件最后添加内容：export PATH=$PATH:/usr/lib/gcc/gcc-arm-none-eabi-5_4-2016q3/bin</span>
<span class="nb">source</span> /etc/profile                 <span class="c1">#使能环境变量。</span>
sudo apt-get install lsb-core       <span class="c1">#64位操作系统需要安装32位依赖库：lsb-core     （arm-none-eabi-gcc 用到）</span>
sudo apt-get install lib32ncurses5  <span class="c1">#64位操作系统需要安装32位依赖库：lib32ncurses5（arm-none-eabi-gdb 用到）</span>
arm-none-eabi-gcc -v                <span class="c1">#查看版本(验证是否安装成功)</span>
<span class="c1">#arm-none-eabi-gcc hello.c -o hello #编译一个程序例子</span>
</code></pre></td></tr></table>
</div>
</div></details>  
<details close=""><summary>2.3、arm-none-linux-gnueabi-gcc</summary>  
<blockquote>
<p><strong>arm-none-linux-gnueabi-gcc</strong> 是 Codesourcery 公司（目前已经被 Mentor 收购）基于 GCC（使用 Glibc 库）推出的的 ARM 交叉编译器。主要用于基于 ARM 架构的 Linux 系统，可用于编译 ARM 架构的 u-boot、Linux 内核、linux 应用等。一般 ARM9、ARM11、Cortex-A 内核，带有 Linux 操作系统的会用到。注意：交叉编译器目前都是 32 位执行程序，依赖 32 位库，事前需要安装 ia32-libs（<a href="https://blog.csdn.net/hj74535099/article/details/50220207" target="_blank" rel="noopener noreffer">网文</a>）或 <a href="https://pkgs.org/download/lsb-core" target="_blank" rel="noopener noreffer">lsb-core</a>。</p>
</blockquote>
<!--  
[本地网文](./doc/Ubuntu安装arm-linux-gcc注意事.docx)）  
-->  
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">wget http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2014.05-29-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2 <span class="c1">#下载交叉编译器压缩包  </span>
sudo tar -xjvf arm-2014.05-29-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2 -C /usr/lib/gcc <span class="c1">#将交叉编译器压缩包解压到：/usr/lib/gcc  </span>
sudo gedit /etc/profile             <span class="c1">#打开环境变量,在文件最后添加内容：export PATH=$PATH:/usr/lib/gcc/arm-2014.05/bin </span>
<span class="nb">source</span> /etc/profile                 <span class="c1">#使能环境变量。</span>
sudo apt-get install lsb-core       <span class="c1">#64位操作系统需要安装32位依赖库：lsb-core     （arm-none-eabi-gcc 用到）</span>
sudo apt-get install lib32ncurses5  <span class="c1">#64位操作系统需要安装32位依赖库：lib32ncurses5（arm-none-eabi-gdb 用到）</span>
arm-none-linux-gnueabi-gcc -v       <span class="c1">#查看版本(验证是否安装成功)</span>
<span class="c1">#arm-none-linux-gnueabi-gcc hello.c -o hello #编译一个程序例子</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>不同系统/软件环境下的版本</strong><br>
● Linux 解压版：在 Linux 系统（如：Ubuntu、RedHat 等）直接解压即可使用。推荐方式！<br>
● Linux 安装版：在 Linux 系统下执行后按照提示安装后使用。<br>
● Windows 解压版：在 Windows 系统下解压后使用，但是需要 MinGW32。<br>
● Windows 安装版：在 Windows 系统下安装后使用。<br>
● 源码版：交叉编译器源代码，按需编译生成相应版本。<br>
下面为多种版本下载，同时增加网友<a href="https://blog.csdn.net/u013467442/article/details/44197725" target="_blank" rel="noopener noreffer">博文</a>提供的网盘下载：</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">Linux 解压版</th>
<th style="text-align:center">网友网盘</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2006q1-3-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2006q1-3-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1pJAxr1T" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2006q1-6-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2006q1-6-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1pJjsX0v" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2006q3-26-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2006q3-26-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1sj0PPwh" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2007q1-10-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2007q1-10-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1dDoxdIT" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2007q1-21-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2007q1-21-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1zs2PS" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2007q3-51-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2007q3-51-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1hqvc7uW" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2008q1-126-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2008q1-126-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1bn8JSBl" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2008q3-41-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2008q3-41-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1sj8Xr7B" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2008q3-72-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2008q3-72-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1sjDbdk5" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2009q1-176-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2009q1-176-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1eQDx5BW" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2009q1-203-arm-none-linux-gnueabi-i686-pc-linux-gnu.bz2" target="_blank" rel="noopener noreffer">arm-2009q1-203-arm-none-linux-gnueabi-i686-pc-linux-gnu.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1hq3jZ60" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2009q3-67-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2009q3-67-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1dDEf4nJ" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2010.09-50-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2010.09-50-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1ntv8p7N" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2010q1-202-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2010q1-202-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1jG9R9EA" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2011.03-41-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2011.03-41-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1dD7tU8p" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2012.09-64-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2012.09-64-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1ntA1wI9" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2013.05-24-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2013.05-24-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1i3gNttF" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2013.11-33-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2013.11-33-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1dDkZmoh" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2014.05-29-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2" target="_blank" rel="noopener noreffer">arm-2014.05-29-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1mgyYfos" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left">Linux 安装版</th>
<th style="text-align:center">网友网盘</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2006q3-26-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2006q3-26-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1hqKfaAw" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2007q1-10-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2007q1-10-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1bngZ90r" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2007q1-21-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2007q1-21-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1sjFcXUP" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2007q3-51-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2007q3-51-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1o6v6nWm" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2008q1-126-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2008q1-126-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1gd9XC1X" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2008q3-41-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2008q3-41-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1gdf53fP" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2008q3-72-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2008q3-72-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1dDf9BGX" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2009q1-176-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2009q1-176-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1mgqQCDM" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2009q1-203-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2009q1-203-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1c0H5ui0" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2009q3-67-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2009q3-67-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1lLsTo" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2010.09-50-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2010.09-50-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1eQf78KM" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2010q1-202-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2010q1-202-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1qW8tw1e" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2011.03-41-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2011.03-41-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1eQCbBcI" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2011.09-70-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2011.09-70-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1gdDv5rd" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2012.03-57-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2012.03-57-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1gd26ezT" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2012.09-64-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2012.09-64-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1jG2zYUq" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2013.05-24-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2013.05-24-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1eQ7rTmE" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2013.11-33-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2013.11-33-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1gvEt4" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-none-linux-gnueabi/arm-2014.05-29-arm-none-linux-gnueabi.bin" target="_blank" rel="noopener noreffer">arm-2014.05-29-arm-none-linux-gnueabi.bin</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1o6JmOXG" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left">Windows Mingw32 版</th>
<th style="text-align:center">网友网盘</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/gnu-csl-arm-2005Q1B-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">gnu-csl-arm-2005Q1B-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1kTmOULx" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2006q3-26-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2006q3-26-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1dDH3rdZ" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2007q1-10-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2007q1-10-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1bn1YrRx" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2007q1-21-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2007q1-21-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1pJuOqRT" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2007q3-51-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2007q3-51-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1pJJQKeZ" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2008q1-126-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2008q1-126-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1i3KcX6l" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2008q3-41-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2008q3-41-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1qWLQ84O" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2008q3-72-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2008q3-72-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1ntHnbXB" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2009q1-176-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2009q1-176-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1o69d0gU" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2009q1-203-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2009q1-203-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1eQ1Sjtw" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2009q3-67-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2009q3-67-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1qWBHlne" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2010.09-50-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2010.09-50-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1nt0XXNz" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2010q1-202-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2010q1-202-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1jG85Bym" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2011.03-41-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2011.03-41-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1jG9lDkE" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2011.09-70-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2011.09-70-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1sj7B13B" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2012.03-57-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2012.03-57-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1c0hD47Q" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2012.09-64-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2012.09-64-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1i3va3wL" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2013.05-24-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2013.05-24-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1bnCNEaz" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2013.11-33-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2013.11-33-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1pJ0nUkj" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2014.05-29-arm-none-linux-gnueabi-i686-mingw32.tar.bz2" target="_blank" rel="noopener noreffer">arm-2014.05-29-arm-none-linux-gnueabi-i686-mingw32.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1sj4T7IH" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left">Windows 安装版</th>
<th style="text-align:center">网友网盘</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/gnu-csl-arm-2005Q1B-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">gnu-csl-arm-2005Q1B-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1gdxMxWZ" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2006q1-3-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2006q1-3-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1ntqO8MP" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2006q1-6-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2006q1-6-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1pJNo76F" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2006q3-26-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2006q3-26-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1c0vkFM4" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2007q1-10-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2007q1-10-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1mg9N1C8" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2007q1-21-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2007q1-21-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1eQ06tou" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2007q3-51-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2007q3-51-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1sjv0hB3" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2008q1-126-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2008q1-126-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1pJG2VYr" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2008q3-41-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2008q3-41-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1sjjUP9j" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2008q3-72-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2008q3-72-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1eQEd2ee" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2009q1-176-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2009q1-176-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1c07vWVA" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2009q1-203-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2009q1-203-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1gduyCoF" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2009q3-67-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2009q3-67-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1kTkNbpX" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2010.09-50-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2010.09-50-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1bn5whSb" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2010q1-202-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2010q1-202-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1qWHgRfu" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2011.03-41-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2011.03-41-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1o6iFcuu" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2011.09-70-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2011.09-70-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1mgoiMI8" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2012.03-57-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2012.03-57-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1jGBTxNC" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2012.09-64-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2012.09-64-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1jGC9wBs" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2013.05-24-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2013.05-24-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1c0Ilr2o" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2013.11-33-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2013.11-33-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1kTHrdDt" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2014.05-29-arm-none-linux-gnueabi.exe" target="_blank" rel="noopener noreffer">arm-2014.05-29-arm-none-linux-gnueabi.exe</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1dDviBkP" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left">源代码</th>
<th style="text-align:center">网友网盘</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/gnu-csl-arm-2005Q1B-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">gnu-csl-arm-2005Q1B-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1sjM43Dz" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2006q1-3-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2006q1-3-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1pJDflpx" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2006q1-6-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2006q1-6-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1o64tHYq" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2006q3-26-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2006q3-26-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1eQxi2Ro" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2007q1-10-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2007q1-10-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/14ImMa" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2007q1-21-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2007q1-21-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1nt5HE5b" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2007q3-51-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2007q3-51-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1o6iFcvC" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2008q1-126-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2008q1-126-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1sj6V0Jj" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2008q3-41-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2008q3-41-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1o6Fjdfc" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2008q3-72-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2008q3-72-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1ntmKPbr" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2009q1-176-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2009q1-176-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1o69JwxG" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2009q1-203-arm-none-linux-gnueabi.src.tar.bz2.bz2" target="_blank" rel="noopener noreffer">arm-2009q1-203-arm-none-linux-gnueabi.src.tar.bz2.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1mgqQCFA" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2009q3-67-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2009q3-67-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1i3JxaRV" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2010.09-50-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2010.09-50-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1gd9rIs7" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2010q1-202-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2010q1-202-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1gdkVlkR" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2011.03-41-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2011.03-41-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1pJCzoLH" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2011.09-70-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2011.09-70-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1ntqi9k9" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2012.03-57-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2012.03-57-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1kT5LIaN" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2012.09-64-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2012.09-64-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1gwTdG" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2013.05-24-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2013.05-24-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1hqf4HnQ" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2013.11-33-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2013.11-33-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1eQAaVh4" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.codesourcery.com/sgpp/lite/arm/portal/package4571/public/arm-2014.05-29-arm-none-linux-gnueabi.src.tar.bz2" target="_blank" rel="noopener noreffer">arm-2014.05-29-arm-none-linux-gnueabi.src.tar.bz2</a></td>
<td style="text-align:center"><a href="http://pan.baidu.com/s/1ntFmvjz" target="_blank" rel="noopener noreffer">网盘</a></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>补充</strong>：<br>
<strong>问</strong>：arm-linux-gcc 与 arm-none-linux-gnueabi 有区别吗？<br>
答：eabi 标准的要好些，可能 arm-linux-gcc 就是 arm-none-linux-gnueabi 的一个链接而已。<br>
<strong>问</strong>：arm-linux-gnueabi-gcc 和 arm-linux-gnueabihf-gcc 的区别？<br>
答：两个交叉编译器分别适用于 armel 和 armhf 两个不同的架构，armel 和 armhf 这两种架构在对待浮点运算采取了不同的策略（有 fpu 的 arm 才能支持这两种浮点运算策略）。其实这两个交叉编译器只不过是 gcc 的选项 -mfloat-abi 的默认值不同，其有三种值 soft、softfp、hard。</p>
</blockquote>
</details>  
<details close=""><summary>2.4、arm-none-uclinuxeabi-gcc</summary>  
<blockquote>
<p><strong>arm-none-uclinuxeabi</strong> 用于 uCLinux</p>
</blockquote>
</details>  
<details close=""><summary>2.5、arm-none-symbianelf-gcc</summary>  
<blockquote>
<p><strong>arm-none-symbianelf</strong> 用于 symbian</p>
</blockquote>
</details>  
<details close=""><summary>2.6、arm-eabi-gcc</summary>  
<blockquote>
<p><strong>arm-eabi-gcc</strong> 是 Android ARM 编译器</p>
</blockquote>
</details>  
</details>  
<h3 id="三makemakefile-脚本">三、make+Makefile 脚本</h3>
<details close=""><summary>1、make、<strong>Makefile</strong> 关系 ●</summary>  
<blockquote>
<p>● <code>make</code>是一个脚本工具，用于解释执行 Makefile 脚本的命令工具。<br>
● <code>makefile</code>是脚本语言，用于描述整个工程的编译、链接等规则，调用 GCC（也可以是其它编译器，如：clang）命令执行编译、链接动作。脚本文件默认名称为 Makefile 或 makefile。</p>
</blockquote>
</details>  
<details close=""><summary>2、<strong>make</strong> 命令的使用方法 ●</summary>  
<blockquote>
<p>make 命令常用格式为：<code>make [选项] [目标(操作)]</code>。<br>
make 命令是用来解释和执行 Makefile 脚本命令，<strong>所以<code>[目标(操作)]</code>是由 Makefile 脚本提供的</strong>，如果不指出则 make 工具默认执行 Makefile 中的第一个目标。</p>
</blockquote>
<p>2.1、【目标】目标的名称约定常常有以下惯例：</p>
<table>
<thead>
<tr>
<th style="text-align:left">目标名称</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">all</td>
<td style="text-align:left">表示编译所有并生成执行文件</td>
</tr>
<tr>
<td style="text-align:left">install</td>
<td style="text-align:left">表示安装刚刚生成的执行文件</td>
</tr>
<tr>
<td style="text-align:left">clean</td>
<td style="text-align:left">表示清除全部目标及执行文件</td>
</tr>
<tr>
<td style="text-align:left">distclean</td>
<td style="text-align:left">表示清除全部目标及执行文件，包括 Makefile</td>
</tr>
<tr>
<td style="text-align:left">dist</td>
<td style="text-align:left">包装成一个压缩文件以供发布</td>
</tr>
<tr>
<td style="text-align:left">distcheck</td>
<td style="text-align:left">同上，并检查压缩包是否正常</td>
</tr>
</tbody>
</table>
<p>2.2、【选项】选项参数较少用到，其主要包括：</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>-f</code>filename</td>
<td style="text-align:left">指定执行名称为 filename 的 Makefile 文件</td>
</tr>
<tr>
<td style="text-align:left"><code>-C</code>dirname</td>
<td style="text-align:left">指定执行目录为 dirname（Makefile 文件所在目录）</td>
</tr>
<tr>
<td style="text-align:left"><code>-e</code></td>
<td style="text-align:left">不允许在 Makefile 中替换环境变量的赋值</td>
</tr>
<tr>
<td style="text-align:left"><code>-k</code></td>
<td style="text-align:left">执行命令出错时，放弃当前目标，继续维护其他目标</td>
</tr>
<tr>
<td style="text-align:left"><code>-n</code></td>
<td style="text-align:left">按实际运行时的执行顺序模拟执行命令（包括用 @ 开头的命令），没有实际执行效果，仅仅用于显示执行过程</td>
</tr>
<tr>
<td style="text-align:left"><code>-p</code></td>
<td style="text-align:left">显示 Makefile 中所有的变量和内部规则</td>
</tr>
<tr>
<td style="text-align:left"><code>-r</code></td>
<td style="text-align:left">忽略内部规则</td>
</tr>
<tr>
<td style="text-align:left"><code>-s</code></td>
<td style="text-align:left">执行但不显示命令，常用来检查 Makefile 的正确性</td>
</tr>
<tr>
<td style="text-align:left"><code>-S</code></td>
<td style="text-align:left">如果执行命令出错就退出</td>
</tr>
<tr>
<td style="text-align:left"><code>-t</code></td>
<td style="text-align:left">修改每个目标文件的创建日期</td>
</tr>
<tr>
<td style="text-align:left"><code>-I</code></td>
<td style="text-align:left">忽略运行 make 中执行命令的错误</td>
</tr>
<tr>
<td style="text-align:left"><code>-V</code></td>
<td style="text-align:left">显示 make 的版本号</td>
</tr>
</tbody>
</table>
<p>2.3、【返回】make 命令执行后的三个返回码：</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>0</code></td>
<td style="text-align:left">表示成功执行，则返回【0】</td>
</tr>
<tr>
<td style="text-align:left"><code>1</code></td>
<td style="text-align:left">如果 make 运行时出现任何错误，则返回【1】</td>
</tr>
<tr>
<td style="text-align:left"><code>2</code></td>
<td style="text-align:left">如果你使用了make的“-q”选项，并且 make 使得一些目标不需要更新，则返回【2】</td>
</tr>
</tbody>
</table>
<p>2.4、【步骤】配置、编译、安装/卸载：</p>
<table>
<thead>
<tr>
<th style="text-align:left">步骤</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">configure</td>
<td style="text-align:left">配置操作。configure 是一个 shell 脚本，它可以自动设定源程序以符合各种不同平台上 Unix 系统的特性，并且根据系统参数及环境产生合适的 Makefile 文件或是 C 的头文件，让源程序可以很方便地在这些不同的平台上被编译连接。待续……</td>
</tr>
<tr>
<td style="text-align:left">make</td>
<td style="text-align:left">编译操作（操作第一个目标）</td>
</tr>
<tr>
<td style="text-align:left">make install</td>
<td style="text-align:left">安装操作</td>
</tr>
</tbody>
</table>
<p>2.5、【使用】演示例子：</p>
<p>在命令窗口运行命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">make            <span class="c1"># 默认执行 Makefile 第一个目标</span>
make all        <span class="c1"># 指定执行 Makefile 目标为 all（常见目标：all、install、clean）</span>
make -f mkf     <span class="c1"># 同`make`    , 只是 Makefile 文件名称为 mkf</span>
make -f mkf all <span class="c1"># 同`make all`，只是 Makefile 文件名称为 mkf</span>
</code></pre></td></tr></table>
</div>
</div></details>  
<details close=""><summary>3、Makefile 的语法+例子 ●</summary>  
<details close=""><summary>3.1、【<strong>语法</strong>：基本知识】</summary>  
<blockquote>
<p><strong>3.1.1</strong>、Makefile 包含五项内容：1、显式规则，2、隐含规则，3、变量定义，4、文件指示，5、注释。</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left"><div style="width:64px">分类</div></th>
<th style="text-align:left">使用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">显式规则</td>
<td style="text-align:left">书写者明显指出依赖文件或命令操作等规则</td>
</tr>
<tr>
<td style="text-align:left">隐含规则</td>
<td style="text-align:left">make 自动推导依赖文件或命令操作等规则</td>
</tr>
<tr>
<td style="text-align:left">变量定义</td>
<td style="text-align:left">变量只是定义一串字符串，其相当于宏定义</td>
</tr>
<tr>
<td style="text-align:left">文件指示</td>
<td style="text-align:left">预处理（引用另一个 Makefile、哪些代码不处理、变量定义处理）</td>
</tr>
<tr>
<td style="text-align:left">注释</td>
<td style="text-align:left">“#”为行注释符（没块注释，<strong>强烈建议独占一行并且在行首加“#”注释</strong>），如果需要使用“#”字符，则书写格式为<code>\#</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>3.1.2</strong>、Makefile 处理文件分为：目标、依赖。其中目标分为：实目标、伪目标。</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left"><div style="width:64px">分类</div></th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">实目标</td>
<td style="text-align:left">真正要生成的以文件形式存放在磁盘上的目标（最终的目标只能是一个）。如果想生成多个实目标（文件），则在伪目标的依赖中加入若干个其它实目标（文件）。</td>
</tr>
<tr>
<td style="text-align:left">伪目标</td>
<td style="text-align:left">伪目标不要求生成实际的文件，它后面可以没有依赖文件（也可以加别的目标），它主要是用于完成一些辅助操作。其中典型案例：<code>clean:</code>清除操作。</td>
</tr>
<tr>
<td style="text-align:left">多目标</td>
<td style="text-align:left">一句依赖中有多个目标，它只是语法一种表达，实质多目标就是根据规则拆解为多个的单目标语句，目的只是简化书写。</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left"><div style="width:64px">关系</div></th>
<th style="text-align:left">处理方式</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">目标与依赖的执行顺序关系</td>
<td style="text-align:left">先执行最深层的依赖，再逐级往上执行目标！</td>
</tr>
<tr>
<td style="text-align:left">目标与依赖的搜索对象关系</td>
<td style="text-align:left">只要目标有依赖，make 工具就会尝试在搜索目录中寻找<a href="#XXXX" rel="">依赖文件是否存在</a>或者<a href="#XXXX" rel="">是否为别的目标</a>。如果都为否，则 make 运行就会抛出错误！备注：Makefile 搜索目录为当前 Makefile 根目录及 VPATH、vpath 设置的目录。</td>
</tr>
<tr>
<td style="text-align:left">目标与依赖的路径定义关系</td>
<td style="text-align:left">目标文件在书写时没写明路径表示为当前 Makefile <a href="#XXXX" rel="">根目录</a>文件，有写明路径就是<a href="#XXXX" rel="">指定目录</a>文件。依赖文件没写明路径时由 Makefile <a href="#XXXX" rel="">搜索目录</a>中找出文件（优先搜索当前 Makefile <a href="#XXXX" rel="">根目录</a>文件），有写明路径时就是<a href="#XXXX" rel="">指定目录</a>中找出文件（没找出可能还会尝试从搜索目录找出）；如果最后依赖文件没找出时，就会从另一个<a href="#XXXX" rel="">同路径同名称</a>的目标中尝试生成！总结：对于实目标和实依赖，都必须现场得出<a href="#XXXX" rel="">确定的路径</a>，之后才可以进一步的操作。备注：Makefile 搜索目录为当前 Makefile 根目录及 VPATH、vpath 设置的目录。</td>
</tr>
<tr>
<td style="text-align:left">目标与依赖的规则执行关系</td>
<td style="text-align:left">只有目标文件<a href="#XXXX" rel="">不存在</a>或依赖文件<a href="#XXXX" rel="">更新</a>（依赖新于目标），才会去运行规则(执行他们下面的操作命令)！对于编译工作来说，依赖就是代码的源文件与头文件，只有依赖文件发生改变，才会编译更新目标，否则不执行（会提示：无更新或已更新）！如果想重新全编译，则需要删除全部中间目标文件再运行编译！</td>
</tr>
<tr>
<td style="text-align:left">目标与依赖的包含文件关系</td>
<td style="text-align:left">当使用 include 包含文件时，还会运行固有规则：搜索与包含文件<a href="#XXXX" rel="">同路径同名称</a>的目标并尝试运行规则！具体有如下：只有当【<a href="#XXXX" rel="">包含文件存在</a>】并且【<a href="#XXXX" rel="">没找到对应目标</a> 或者 找到同路径同名称新于规则的实目标(<a href="#XXXX" rel="">实目标新于依赖</a>、<a href="#XXXX" rel="">实目标无依赖</a>)】才放弃运行规则，否则必定运行规则(它优先在用户操作的所有目标前执行，它总是会尝试创建或更新包含文件)。除上面情形外，当出现包含文件不存在、或找不到对应目标都会抛出错误！</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>3.1.3</strong>、Makefile 整体执行顺序：</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">整体执行顺序</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1、读入主 Makefile</td>
</tr>
<tr>
<td style="text-align:left">2、读入被<code>include</code>包含进来的其他 Makefile</td>
</tr>
<tr>
<td style="text-align:left">3、初始化文件中的变量</td>
</tr>
<tr>
<td style="text-align:left">4、推导隐含规则，并分析所有规则</td>
</tr>
<tr>
<td style="text-align:left">5、为所有的目标文件创建依赖关系链</td>
</tr>
<tr>
<td style="text-align:left">6、根据依赖关系，决定哪些目标要重新生成</td>
</tr>
<tr>
<td style="text-align:left">7、执行生成命令</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>3.1.4</strong>、Makefile 几个重要特殊字符：<code>$</code> <code>#</code> <code>;</code> <code>\</code> <code>%</code> <code>*</code> <code>?</code> <code>~</code> <code>-</code>。</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left"><div style="width:64px">特殊字符</div></th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>$$$$</code></td>
<td style="text-align:left"><code>随机号</code>，自动产生的一个随机编号</td>
</tr>
<tr>
<td style="text-align:left"><code>$$</code></td>
<td style="text-align:left"><code>变量符</code>，是访问一个 shell 命令中定义的变量（如：$$var），而非 makefile 的变量。如果某规则在同一个 shell 运行多条命令，则这些命令之间使用“;”连接起来，这样命令相互之间共享变量；否则（多行命令或空格分隔命令）相互之间为没有关联的 shell 命令，不能共享变量</td>
</tr>
<tr>
<td style="text-align:left"><code>$</code></td>
<td style="text-align:left"><code>变量符</code>，定义一串字符串，其相当于宏定义。如：$(abc) 表示变量 abc</td>
</tr>
<tr>
<td style="text-align:left"><code>#</code></td>
<td style="text-align:left"><code>注释符</code>，如果通过 \# 转义则为普通的 # 字符</td>
</tr>
<tr>
<td style="text-align:left"><code>;</code></td>
<td style="text-align:left"><code>分隔符</code>，命令与命令之间加入“;”，表示同一 shell 执行命令，可继承前面命令结果（典型例子：cd ~/123/ ; pwd 则结果是“~/123/”，否则是原目录下！）</td>
</tr>
<tr>
<td style="text-align:left"><code>\</code></td>
<td style="text-align:left"><code>转义符</code> 或 <code>换行符</code>（<strong>注意：换行符后面不能有任何字符，包括空格！</strong>）</td>
</tr>
<tr>
<td style="text-align:left"><code>%</code></td>
<td style="text-align:left"><code>通配符</code>，表示匹配零个或若干字符</td>
</tr>
<tr>
<td style="text-align:left"><code>*</code></td>
<td style="text-align:left"><code>所有符</code>，表示任意一个或多个字符。如：*.c 表示所有 C 文件</td>
</tr>
<tr>
<td style="text-align:left"><code>?</code></td>
<td style="text-align:left"><code>任一符</code>，表示任意一个字符 或 对新的变量或文件执行操作</td>
</tr>
<tr>
<td style="text-align:left"><code>~</code></td>
<td style="text-align:left"><code>家目录</code>。也可以指定用户目录（~xiaomin/test 表示用户 xiaomin 的宿主目录下的 test 目录），但 windows 系统需要由环境变量“HOME”决定</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>3.1.5</strong>、Makefile 命令前缀</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left"><div style="width:64px">命令前缀</div></th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">不加前缀</td>
<td style="text-align:left">输出（打印）命令本身，输出（打印）命令执行的结果</td>
</tr>
<tr>
<td style="text-align:left"><code>@</code></td>
<td style="text-align:left">在命令前面加<code>@</code>，表示只输出命令执行的结果，不输出命令本身</td>
</tr>
<tr>
<td style="text-align:left"><code>-</code></td>
<td style="text-align:left">在命令前面加<code>-</code>，表示忽略 Makefile 因命令出错而终止运行，典型应用：<code>-include</code>包含源码文件依赖信息，在源码文件依赖信息文件没创建(不存在)时忽略错误</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>3.1.6</strong>、Makefile 常用文件类型：</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left"><div style="width:64px">文件类型</div></th>
<th style="text-align:left">unix/linux</th>
<th style="text-align:left">windows</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">源文件</td>
<td style="text-align:left"><code>.c</code>…</td>
<td style="text-align:left"><code>.c</code>…</td>
<td style="text-align:left">源代码文件</td>
</tr>
<tr>
<td style="text-align:left">关系文件</td>
<td style="text-align:left"><code>.d</code></td>
<td style="text-align:left"><code>.d</code></td>
<td style="text-align:left">源文件依赖关系信息，GNU 组织建议用编译器为每一个源文件自动生成依赖关系的内容放到一个文件中</td>
</tr>
<tr>
<td style="text-align:left">中间文件</td>
<td style="text-align:left"><code>.o</code></td>
<td style="text-align:left"><code>.obj</code></td>
<td style="text-align:left">中间目标文件，是二进制机器码，把它们链接起来就是执行文件</td>
</tr>
<tr>
<td style="text-align:left">库文件</td>
<td style="text-align:left"><code>.a</code> <code>.so</code></td>
<td style="text-align:left"><code>.lib</code> <code>.dll</code></td>
<td style="text-align:left">由于源文件太多，编译生成的中间目标文件太多，或是某个相对独立功能模块，可以打包为一个库文件</td>
</tr>
<tr>
<td style="text-align:left">执行文件</td>
<td style="text-align:left"></td>
<td style="text-align:left"><code>.exe</code></td>
<td style="text-align:left">执行文件（在 Windows 系统中编译生成的目标(PC 软件)必须要加<code>.exe</code>后缀，否则每次编译都会重新生成目标）</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>3.1.7</strong>、Makefile 的基本语法：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="nf">target</span><span class="o">:</span> <span class="n">prerequisites</span>   <span class="c"># 目标: 依赖(可多个文件)。（注：只要声明目标，则表明新的语段开始）
</span><span class="c"></span>	<span class="nb">command</span>             <span class="c1"># 命令，前面必须加【tab键】</span>
	command1 <span class="p">;</span> command2 <span class="c1"># 命令，同一[shell]执行命令，可继承前面命令结果（典型例子：cd ~/123/ ; pwd 则结果是 ~/123/，否则是原目录下！）</span>
	command3   command4 <span class="c1"># 命令，前后命令各自运行（多行命令也是如此！）（实质就是各自启动一个新 shell 运行命令，所以互不关联！）</span>
	                    <span class="c1"># 注意(1)：上面是一个整体语段，中间不能插入诸如“xxx=abc”变量定义等非命令语句!!!</span>
	                    <span class="c1"># 注意(2)：不建议在语句后面加注释，因为会影响语句表达，强烈建议在独立行编写注释!!</span>
	                    <span class="c1"># ！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！</span>
<span class="err">备注：</span>
<span class="err">(1)</span> <span class="err">代码行后面加入注释，是为了解释每行语句的作用，实际编写</span> <span class="err">Makefile</span> <span class="err">脚本时不应</span>
    <span class="err">这样注释，因为可能会影响语句表达甚至出错，所以建议测试例子时把代码行注释删掉。</span>
<span class="err">(2)</span> <span class="err">实际上</span> <span class="err">Makefile</span> <span class="err">脚本语法要求要尽量避免每行文本代码后面存在空格等，因为可能</span>
    <span class="err">会影响语句表达甚至出错，特别变量行尾，因为判断语句判断变量时后面空格一同判断。</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.1.8</strong>、Makefile 的演示例子：</p>
</blockquote>
<p>编写 Makefile 文件内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c">####【生成多个中间文件】####
</span><span class="c"></span><span class="nv">objects</span> <span class="o">=</span> a.o b.o       <span class="c1"># 备注：UNIX 中间文件为`.o`文件，在 Windows 则是`.obj`文件。</span>
<span class="nf">.PHONY</span><span class="o">:</span><span class="n">oobj</span>             <span class="c"># (1) 表明 oobj 是一个伪目标，不是目标文件！
</span><span class="c"></span><span class="nf">oobj</span><span class="o">:</span> <span class="k">$(</span><span class="nv">objects</span><span class="k">)</span>        <span class="c"># (2) 因为 oobj 是一个伪目标，所以最终得到是其依赖：a.o b.o 中间文件【多个文件】。
</span><span class="c"></span><span class="nf">$(objects)</span><span class="o">:</span> %.<span class="n">o</span>: %.<span class="n">c</span>    <span class="c"># 静态的多目标语句，展开后目标与依赖为【一对一】关系！
</span><span class="c"></span>	gcc -c $&lt; -o <span class="nv">$@</span>     <span class="c1"># 逐一将依赖(`.c`文件)编译为目标(`.o`文件)（目标为：a.o b.o，依赖为：a.c b.c）</span>
	@echo <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2"> </span>$<span class="s2">^&#34;</span>       <span class="c1"># 打印出目标与依赖（因上面是静态模式，所以 $^ 全部依赖只有一个对象）</span>

<span class="c">####【伪目标的典型应用】####
</span><span class="c"></span><span class="nf">.PHONY</span><span class="o">:</span><span class="n">clean</span>            <span class="c"># 为了避免出错，使用【.PHONY】说明【clean】是一个伪目标（PHONY 读音 ˈfəʊni）
</span><span class="c"></span><span class="nf">clean</span><span class="o">:</span>
	rm -f *.i *.s *.o   <span class="c1"># 删除编译生成的文件</span>
</code></pre></td></tr></table>
</div>
</div><p>在命令窗口运行命令及结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">make oobj               <span class="c1"># 运行命令，当前文件夹下的 a.c b.c 源文件编译为中间目标文件！（备注：要事先创建 a.c b.c 这两个文件，它们可以是空白文件）</span>
make clean              <span class="c1"># 运行命令，当前文件夹下扩展名为 *.i *.s *.o 的文件被删除！</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.1.9</strong>、Makefile 的常规语法汇总：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="err">-include</span> <span class="err">out/a.d</span>             <span class="c"># 包含文件，导入依赖信息。
</span><span class="c"></span><span class="nv">VPATH</span> <span class="o">=</span> src:hard/board       <span class="c1"># 增加 make 工具搜索目录。</span>

<span class="nv">objs</span> <span class="o">=</span> out/a.o out/b.o       <span class="c1"># 变量定义(赋值)，还有&#34;:=&#34;、&#34;?=&#34;、&#34;+=&#34;，以及修饰符&#34;override&#34;和&#34;export&#34;。</span>

<span class="nf">main.o</span><span class="o">:</span> <span class="n">main</span>.<span class="n">c</span> <span class="n">main</span>.<span class="n">h</span>        <span class="c"># 单目标多依赖语句，最常规的目标依赖语句。
</span><span class="c"></span>
<span class="nf">main.o main.d</span><span class="o">:</span> <span class="n">main</span>.<span class="n">c</span> <span class="n">main</span>.<span class="n">h</span> <span class="c"># 多目标多依赖语句，表示几个目标具有相同的依赖(集)，只要依赖有变动，则几个目标都要更新与执行命令。
</span><span class="c"></span>
<span class="nf">$(objs</span><span class="o">:</span>.<span class="n">o</span>=.<span class="n">c</span>)                <span class="c"># 替换变量所有字段，将变量所有字段尾部的&#34;.o&#34;替换为&#34;.c&#34;。
</span><span class="c"></span><span class="nf">$(objs</span><span class="o">:</span>%.<span class="n">o</span>=%.<span class="n">c</span>)              <span class="c"># 同上
</span><span class="c"></span><span class="nf">$(@</span><span class="o">:</span>%.<span class="n">o</span>=%.<span class="n">c</span>)                 <span class="c"># 同上，对象为自动变量(目标)
</span><span class="c"></span>                             　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　 ┌→必定是【<span class="k">$(</span>objs<span class="k">)</span>】指定的文件，【out/%.o】与【<span class="k">$(</span>objs<span class="k">)</span>】的路径必须是一样！
<span class="nf">$(objs)</span><span class="o">:</span> <span class="n">out</span>/%.<span class="n">o</span>: %.<span class="n">c</span>        <span class="c"># 静态的多目标语句，展开后目标与依赖为【一对一】关系！目标为指定目录[out/]的指定&#34;.d&#34;，依赖为 Makefile [搜索目录]中与目标[同名称]的&#34;.c&#34;文件。
</span><span class="c"></span><span class="nf">$(objs)</span><span class="o">:</span> <span class="n">out</span>/%.<span class="n">o</span>: <span class="n">src</span>/%.<span class="n">c</span>    <span class="c"># 同上，只是依赖也是指定路径！
</span><span class="c"></span>                             　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　 ┌→必定是 Makefile【依赖关系链】中的文件，从【上级依赖】中获得！
<span class="nf">out/%.d</span><span class="o">:</span> %.<span class="n">c</span>                 <span class="c"># 动态的多目标语句，展开后目标与依赖为【一对一】关系！目标为指定目录[out/]的某个&#34;.d&#34;，依赖为 Makefile [搜索目录]中与目标[同名称]的&#34;.c&#34;文件。
</span><span class="c"></span><span class="nf">out/%.d</span><span class="o">:</span> <span class="n">src</span>/%.<span class="n">c</span>             <span class="c"># 同上，只是依赖也是指定路径！
</span><span class="c"></span>                             　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　 ┌→必定是 Makefile【依赖关系链】中的文件，从【上级依赖】中获得！
<span class="nf">%.d</span><span class="o">:</span> %.<span class="n">c</span>                     <span class="c"># 动态的多目标语句，展开后目标与依赖为【一对一】关系！目标为[当前根目录]中的某个&#34;.d&#34;，依赖为 Makefile [搜索目录]中与目标[同名称]的&#34;.c&#34;文件。
</span><span class="c"></span><span class="nf">%.d</span><span class="o">:</span> %.<span class="n">c</span> <span class="p">|</span> <span class="n">mkdir_target</span>      <span class="c"># 同上，并且在其〖所有操作前执行一次〗mkdir_target 目标的操作。这个对于操作前创建文件夹非常有用，它一般定义为伪目标，它下面命令为创建文件夹。
</span><span class="c"></span>
<span class="nf">$(objs)</span><span class="o">:</span> <span class="k">$(</span><span class="nv">objs</span>:.<span class="nv">o</span>=.<span class="nv">c</span><span class="k">)</span>       <span class="c"># 多目标多依赖语句，展开后目标与依赖为【一对多】关系！目标为&#34;.o&#34;文件，依赖为&#34;.c&#34;文件。备注：每个目标具有相同的依赖(集)！
</span><span class="c"></span>
<span class="k">$(</span><span class="nv">func</span> <span class="nv">arg</span>1,<span class="nv">arg</span>2...<span class="k">)</span>         <span class="c"># 操作函数，&#34;func&#34;为函数，&#34;arg1&#34;第一个参数，&#34;arg2&#34;第二个参数……
</span><span class="c"></span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.1.10</strong>、Makefile 编译多个文件写法：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c">####################################################
</span><span class="c"># 方法一：
</span><span class="c"># 【动态的多目标语句】编译出多个目标文件，特点如下：
</span><span class="c"># 1、[目标文件]须【指出路径】，否则就是当前目录下；
</span><span class="c"># 2、[目标文件]从【上级依赖】中获得；
</span><span class="c"># 3、[依赖文件]从【搜索目录】下寻找；
</span><span class="c"># 4、[目标文件]与[依赖文件]为【同名】的不同类型文件；
</span><span class="c"># 5、[目标文件]与[依赖文件]为【一对一】关系。
</span><span class="c">####################################################
</span><span class="c"></span><span class="nf">all</span><span class="o">:</span> <span class="n">out</span>/<span class="n">main</span>.<span class="n">o</span> <span class="n">out</span>/<span class="n">foo</span>.<span class="n">o</span>

<span class="nf">out/%.o</span><span class="o">:</span> %.<span class="n">c</span>
	gcc -c $&lt; -o <span class="nv">$@</span>

<span class="c">####################################################
</span><span class="c"># 方法二：（--前提：make 的版本 3.81 或更高版本--）
</span><span class="c"># 【动态代码】生成多段编译语句，每段编译一个文件：
</span><span class="c"># 1、使用 define      实现一个伪函数体；(变量用 $$)
</span><span class="c"># 2、使用 $(call )    实现调用一个伪函数并传递参数；
</span><span class="c"># 3、使用 $(eval )    将表达式(字符串)转为脚本代码；
</span><span class="c"># 4、使用 $(foreach ) 从一串字符串中依次取出一个字
</span><span class="c">#    段作为入口参数并运行伪函数体。
</span><span class="c">####################################################
</span><span class="c"></span><span class="err">define</span> <span class="err">FUNC</span>
<span class="nf">$1</span><span class="o">:</span> $2
	gcc -c -o <span class="nv">$$</span>@ <span class="nv">$$</span>&lt;
<span class="err">endef</span>

<span class="nv">SRCS_F</span> <span class="o">:=</span> app/main.c usr/foo.c
<span class="nf">all</span><span class="o">:</span> <span class="k">$(</span><span class="nv">addprefix</span> <span class="nv">out</span>/,<span class="k">$(</span><span class="nv">notdir</span> <span class="k">$(</span><span class="nv">SRCS_F</span>:%.<span class="nv">c</span>=%.<span class="nv">o</span><span class="k">)))</span>

<span class="nf">$(foreach v,$(SRCS_F),$(eval $(call FUNC,$(addprefix out/,$(notdir $(v</span><span class="o">:</span>%.<span class="n">c</span>=%.<span class="n">o</span>)))<span class="p">,</span><span class="k">$(</span><span class="nv">v</span><span class="k">)</span>)))

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.1.11</strong>、Makefile 的错误信息解释：</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">错误信息解释</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1、<code>make: *** No rule to make target 'build/main.o', needed by 'build/main'.  Stop</code></td>
</tr>
<tr>
<td style="text-align:left">● 错误：脚本工具(make) 无法找到<code>build/main.o</code>依赖文件。</br>◆ 原因：依赖文件不在 Makefile 的搜索目录中，可能要增加搜索目录或要生成依赖文件。</td>
</tr>
<tr>
<td style="text-align:left">2、<code>app/main.c:2:19: fatal error: hello.h: No such file or directory</code></td>
</tr>
<tr>
<td style="text-align:left">● 错误：编译工具(gcc)编译<code>app/main.c</code>没找到包含文件<code>hello.h</code>。</br>◆ 解决：在编译命令加入包含路径选项，如：<code>-I usr/inc</code>。</td>
</tr>
<tr>
<td style="text-align:left">3、<code>fatal error: cannot specify -o with -c, -S or -E with multiple files</code></td>
</tr>
<tr>
<td style="text-align:left">● 错误：该项目将要生成两个或更多相同名称的<code>.o</code>文件，产生了冲突。</br>◆ 解决：使用<code>$(eval $(call ……))</code>编译语句，依赖写法由<code>$$^</code>改为<code>$$&lt;</code>。</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>3.1.11</strong>、网上资料</p>
</blockquote>
<p>● 陈皓-跟我一起写 Makefile：《<a href="https://seisman.github.io/how-to-write-makefile/index.html" target="_blank" rel="noopener noreffer">网友整理版</a>》、《<a href="https://blog.csdn.net/haoel/article/details/2886" target="_blank" rel="noopener noreffer">原作者博文</a>》、《<a href="https://www.cnblogs.com/wang_yb/articles/3990952.html" target="_blank" rel="noopener noreffer">网友总结</a>》、《<a href="https://www.jb51.net/article/233898.htm" target="_blank" rel="noopener noreffer">网友讲解</a>》。<br>
● 李云-驾驭 Makefile：《<a href="https://blog.51cto.com/yunli/195759" target="_blank" rel="noopener noreffer">原作者博文</a>》、《<a href="https://blog.csdn.net/guyongqiangx/article/details/112250355" target="_blank" rel="noopener noreffer">网友网文</a>》、《<a href="https://github.com/guyongqiangx/makefile-study" target="_blank" rel="noopener noreffer">网友仓库</a>》。</p>
</details>  
<details close=""><summary>3.2、【<strong>变量</strong>：单个定义】</summary>  
<blockquote>
<p><strong>3.2.1</strong>、Makefile 的自动变量：（更多：<a href="https://blog.csdn.net/weixin_30443075/article/details/98408120" target="_blank" rel="noopener noreffer">网文</a>）</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left"><div style="width:64px">变量</div></th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>$&lt;</code></td>
<td style="text-align:left">代表当前规则中首个依赖文件，如果依赖目标是以模式（即“%”）定义的，则<code>$&lt;</code>是符合模式的一系列的文件集</td>
</tr>
<tr>
<td style="text-align:left"><code>$^</code></td>
<td style="text-align:left">代表当前规则中所有依赖文件，并去除重复</td>
</tr>
<tr>
<td style="text-align:left"><code>$+</code></td>
<td style="text-align:left">代表当前规则中所有依赖文件（不去除重复）</td>
</tr>
<tr>
<td style="text-align:left"><code>$@</code></td>
<td style="text-align:left">代表当前规则中单个目标文件（因为多个目标最终被拆解为单个目标语句表达格式）</td>
</tr>
<tr>
<td style="text-align:left"><code>$*</code></td>
<td style="text-align:left">不包含扩展名的目标文件名称（这个是 GNU make 特有的，其它的 make 不一定支持）</td>
</tr>
<tr>
<td style="text-align:left"><code>$(@D)</code></td>
<td style="text-align:left">截取目标文件的目录部分，相当于函数<code>$(dir $@)</code></td>
</tr>
<tr>
<td style="text-align:left"><code>$(@F)</code></td>
<td style="text-align:left">截取目标文件的文件名部分，相当于函数<code>$(notdir $@)</code></td>
</tr>
<tr>
<td style="text-align:left"><code>$(^D)</code></td>
<td style="text-align:left">截取所有依赖目标文件中目录部分，并去除重复，相当于函数<code>$(dir $^)</code></td>
</tr>
<tr>
<td style="text-align:left"><code>$(^F)</code></td>
<td style="text-align:left">截取所有依赖目标文件中文件名部分，并去除重复，相当于函数<code>$(notdir $^)</code></td>
</tr>
<tr>
<td style="text-align:left"><code>$(&lt;D)</code> <code>$(&lt;F)</code> <code>$(+D)</code> <code>$(+F)</code> <code>$(?D)</code> <code>$(?F)</code></td>
<td style="text-align:left">原理同上</td>
</tr>
<tr>
<td style="text-align:left"><code>$?</code></td>
<td style="text-align:left">所有比目标新的依赖集合，以空格分隔</td>
</tr>
<tr>
<td style="text-align:left"><code>$n</code></td>
<td style="text-align:left">传递给脚本或函数的参数。n 是一个数字，表示第几个参数。例如，第一个参数是 $1，第二个参数是 $2</td>
</tr>
<tr>
<td style="text-align:left"><code>$$</code></td>
<td style="text-align:left"><code>$$var</code>是在访问一个 shell 命令内定义的变量，而非 makefile 的变量。如果某规则在同一个 shell 运行多条命令，则这些命令之间使用<code>;</code>连接起来，这样命令相互之间共享变量；否则（多行命令或空格分隔命令）相互之间为没有关联的 shell 命令，不能共享变量</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>3.2.2</strong>、Makefile 的默认变量：（更多：<a href="https://seisman.github.io/how-to-write-makefile/implicit_rules.html#id5" target="_blank" rel="noopener noreffer">整理版</a>、<a href="https://haoel.blog.csdn.net/article/details/2897" target="_blank" rel="noopener noreffer">原版</a>）</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left"><div style="width:128px">变量</div></th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>$(AS)</code></td>
<td style="text-align:left">汇编程序（默认为<code>as</code>）</td>
</tr>
<tr>
<td style="text-align:left"><code>$(ASFLAGS)</code></td>
<td style="text-align:left">汇编选项（默认为空）</td>
</tr>
<tr>
<td style="text-align:left"><code>$(CC)</code></td>
<td style="text-align:left">变量：C 　编译器（默认为<code>cc</code>）</td>
</tr>
<tr>
<td style="text-align:left"><code>$(CPP)</code></td>
<td style="text-align:left">变量：C 　程序的预处理器（默认为<code>$(CC) -E</code>）</td>
</tr>
<tr>
<td style="text-align:left"><code>$(CFLAGS)</code></td>
<td style="text-align:left">变量：C 　编译器选项参数（默认为空）</td>
</tr>
<tr>
<td style="text-align:left"><code>$(CXX)</code></td>
<td style="text-align:left">变量：C++ 编译器（默认为<code>g++</code>）</td>
</tr>
<tr>
<td style="text-align:left"><code>$(CXXFLAGS)</code></td>
<td style="text-align:left">变量：C++ 编译器选项参数（默认为空）</td>
</tr>
<tr>
<td style="text-align:left"><code>$(AR)</code></td>
<td style="text-align:left">变量：库文件打包命令（默认命令是<code>ar</code>）</td>
</tr>
<tr>
<td style="text-align:left"><code>$(ARFLAGS)</code></td>
<td style="text-align:left">变量：库选项参数（默认为空）</td>
</tr>
<tr>
<td style="text-align:left"><code>$(RM)</code></td>
<td style="text-align:left">变量：删除文件命令（默认命令是<code>rm -f</code>）</td>
</tr>
<tr>
<td style="text-align:left"><code>$(MAKE)</code></td>
<td style="text-align:left">变量：当前使用的 make 命令工具（默认命令是<code>make</code>）</td>
</tr>
<tr>
<td style="text-align:left"><code>$(MAKECMDGOALS)</code></td>
<td style="text-align:left">变量：当前使用的 make 命令的输入参数（例如：<code>make clean</code>命令，则输入参数为<code>clean</code>）</td>
</tr>
<tr>
<td style="text-align:left"><code>$(MAKEFLAGS)</code></td>
<td style="text-align:left">变量：主要用于调用子 Makefile 时传递<code>make</code>命令参数（例如：<code>cd subdir &amp;&amp; $(MAKE) MAKEFLAGS=</code>则表示不想往下层传递<code>make</code>命令任何参数）</td>
</tr>
<tr>
<td style="text-align:left"><code>$(SHELL)</code></td>
<td style="text-align:left">变量：当前使用的 shell（命令终端，包括所在路径）！注意：不管是否<code>export</code>都会传递给子 Makefile！</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>3.2.3</strong>、Makefile 变量的名称要求：</p>
</blockquote>
<p>用户变量的命名字可以包含字母、数字，下划线（可以是数字开头），但不应该含有<code>:</code>、<code>#</code>、<code>=</code>或是空字符（空格、回车等），并且不建议使用全部大写字母。其实变量只是一个宏定义，它代表一串字符串，Makefile 运行前将变量展开为最终的一串字符串，所以并不能在 Makefile 运行命令过程修改其值！</p>
<blockquote>
<p><strong>3.2.4</strong>、Makefile 变量的运算符：</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left"><div style="width:80px">运算符</div></th>
<th style="text-align:left">使用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>=</code></td>
<td style="text-align:left">动态变量，会随引用变化</td>
</tr>
<tr>
<td style="text-align:left"><code>:=</code></td>
<td style="text-align:left">静态变量，不随引用变化</td>
</tr>
<tr>
<td style="text-align:left"><code>?=</code></td>
<td style="text-align:left">只有变量为空时才会赋值</td>
</tr>
<tr>
<td style="text-align:left"><code>+=</code></td>
<td style="text-align:left">将字串追加到变量的尾端（自动加空格隔开）</td>
</tr>
<tr>
<td style="text-align:left"><code>override</code></td>
<td style="text-align:left">变量强制覆盖的关键字！可避免 shell 传递来的同名变量修改其值</td>
</tr>
<tr>
<td style="text-align:left"><code>export</code></td>
<td style="text-align:left">在父 Makefile 文件使用 export 声明变量，则可传给子 Makefile 文件使用其对应<a href="#XXXX" rel="">克隆变量</a>。注意：子 Makefile 修改克隆变量的值不会影响父 Makefile 源变量的值！即：子 Makefile 不能通过变量传值给父 Makefile ！补充：unexport 表示取消分享变量。</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>3.2.5</strong>、Makefile 变量的基本语法：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="nv">AA</span> <span class="o">=</span> abc    <span class="c1"># 定义变量 AA （如果改用 := 表示定义的当前目标变量就固定下来，之后不会跟随其引用的变量变化而变化）</span>
<span class="k">$(</span><span class="nv">AA</span><span class="k">)</span>       <span class="c"># $(AA) 代表 abc。（注意：`AA = abc`定义后面不能有任何多余字符，包括空格、注释等，否则影响执行！）
</span><span class="c"></span><span class="err">${AA}</span>       <span class="c"># 同上。            ！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！
</span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.2.6</strong>、Makefile 变量的常规用法：</p>
</blockquote>
<p>编写 Makefile 文件内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c"># 特别注意：！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！
</span><span class="c"># 下面的`a = first`、`b = second`、`xx1 = a`、`xx2 = 1`后面不能有空格等，否则影响结果！
</span><span class="c"></span>
<span class="c">####【直接代替】####
</span><span class="c"></span><span class="nv">CC</span> <span class="o">=</span> gcc                      <span class="c1"># 定义变量 CC，则 $(CC) 代表 gcc（注：$(CC) 可以写成 ${CC}）</span>
<span class="nv">objs</span> <span class="o">:=</span> a.o b.o               <span class="c1"># 定义变量 objs，则 $(objs) 代表 a.o b.o </span>
<span class="nf">all</span><span class="o">:</span> <span class="k">$(</span><span class="nv">objs</span><span class="k">)</span>                  <span class="c"># 这句告诉 make 工具：最终得到 a.o b.o 中间文件
</span><span class="c"></span><span class="nf">$(objs)</span><span class="o">:</span> %.<span class="n">o</span>: %.<span class="n">c</span>             <span class="c"># 从 $(objects) 变量中制作出【一对一】关系的目标(`.o`文件)和依赖(`.c`文件)
</span><span class="c"></span>	<span class="k">$(</span>CC<span class="k">)</span> -O2 $&lt; -o <span class="nv">$@</span>        <span class="c1"># 逐一将依赖(`.c`文件)编译为目标(`.o`文件)（目标为：a.o b.o，依赖为：a.c b.c）</span>

<span class="c">####【变量追加】####
</span><span class="c"></span><span class="nv">objs</span> <span class="o">+=</span> fff.o                 <span class="c1"># 追加变量，则此时最新变量就是 a.o b.o fff.o</span>


<span class="c">####【字段替换】####
</span><span class="c"></span><span class="nv">obj3</span>  <span class="o">:=</span> a.o b.o c.o d.s      <span class="c1"># 下面替换的最终结果为：a.c b.c c.c d.s</span>
<span class="nv">src2</span> <span class="o">:=</span> <span class="k">$(</span>obj3:.o<span class="o">=</span>.c<span class="k">)</span>         <span class="c1"># 将变量 $(obj3)【全部】定义的文件名称尾部的&#34;.o&#34;替换为&#34;.c&#34; 并取出传递给 src2</span>
<span class="nv">src1</span> <span class="o">:=</span> <span class="k">$(</span>obj3:%.o<span class="o">=</span>%.c<span class="k">)</span>       <span class="c1"># 将变量 $(obj3)【全部】定义的文件名称尾部的&#34;.o&#34;替换为&#34;.c&#34; 并取出传递给 src1</span>

<span class="c">####【字符替换】####
</span><span class="c"></span><span class="nv">first_second</span> <span class="o">=</span> Hello
<span class="nv">a</span> <span class="o">=</span> first
<span class="nv">b</span> <span class="o">=</span> second
<span class="nv">src3</span> <span class="o">=</span> <span class="k">$(</span><span class="nv">$a_$b</span><span class="k">)</span>               <span class="c1"># 则“$a_$b”组成了“first_second”，于是 $(src3) 的值就是“Hello”</span>
                              <span class="c1"># 注意：变量定义后面不能有任何字符（包括空格、注释等），否则这些字符也被替换进去!!!</span>
                              <span class="c1"># ！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！</span>
<span class="nv">a_objs</span> <span class="o">:=</span> a.o b.o c.o
<span class="nv">1_objs</span> <span class="o">:=</span> 1.o 2.o 3.o
<span class="nv">xx1</span> <span class="o">=</span> a
<span class="nv">xx2</span> <span class="o">=</span> <span class="m">1</span>
<span class="nv">src4</span> <span class="o">:=</span> <span class="k">$($(</span>xx1<span class="k">)</span>_objs:.o<span class="o">=</span>.c<span class="k">)</span>  <span class="c1"># 表示将目标 a_objs 的源文件名称尾部的 .o 替换为 .c 并传给 src4</span>
<span class="nv">src5</span> <span class="o">:=</span> <span class="k">$($(</span>xx2<span class="k">)</span>_objs:.o<span class="o">=</span>.c<span class="k">)</span>  <span class="c1"># 表示将目标 1_objs 的源文件名称尾部的 .o 替换为 .c 并传给 src5</span>
                              <span class="c1"># 注意：变量定义后面不能有任何字符（包括空格、注释等），否则这些字符也被替换进去!!!</span>
                              <span class="c1"># ！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！</span>
<span class="nf">test</span><span class="o">:</span>
	@echo <span class="s2">&#34;objs: </span><span class="k">$(</span>objs<span class="k">)</span><span class="s2">&#34;</span>     <span class="c1"># 打印信息为 objs: a.o b.o fff.o （如果 @echo 改为 echo 则表示本行字符命令也打印出来）</span>
	@echo <span class="s2">&#34;src1: </span><span class="k">$(</span>src1<span class="k">)</span><span class="s2">&#34;</span>     <span class="c1"># 打印信息为 src1: a.c b.c c.c d.s</span>
	@echo <span class="s2">&#34;src2: </span><span class="k">$(</span>src2<span class="k">)</span><span class="s2">&#34;</span>     <span class="c1"># 打印信息为 src2: a.c b.c c.c d.s</span>
	@echo <span class="s2">&#34;src3: </span><span class="k">$(</span>src3<span class="k">)</span><span class="s2">&#34;</span>     <span class="c1"># 打印信息为 src3: Hello</span>
	@echo <span class="s2">&#34;src4: </span><span class="k">$(</span>src4<span class="k">)</span><span class="s2">&#34;</span>     <span class="c1"># 打印信息为 src4: a.c b.c c.c</span>
	@echo <span class="s2">&#34;src5: </span><span class="k">$(</span>src5<span class="k">)</span><span class="s2">&#34;</span>     <span class="c1"># 打印信息为 src5: 1.c 2.c 3.c</span>
</code></pre></td></tr></table>
</div>
</div><p>在命令窗口运行命令及结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">make <span class="nb">test</span>                     <span class="c1"># 运行命令，结果如下：</span>
objs: a.o b.o fff.o
src1: a.c b.c c.c d.s
src2: a.c b.c c.c d.s
src3: Hello
src4: a.c b.c c.c
src5: 1.c 2.c 3.c
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.2.7</strong>、Makefile 变量的覆盖用法：</p>
</blockquote>
<p>编写 Makefile 文件内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c">######普通变量######
</span><span class="c"></span><span class="nv">src1</span> <span class="o">:=</span> a.c b.c c.c
<span class="nf">all1</span><span class="o">:</span>
	@echo <span class="s2">&#34;src1: </span><span class="k">$(</span>src1<span class="k">)</span><span class="s2">&#34;</span>

<span class="c">######变量覆盖######
</span><span class="c"></span><span class="nf">override src2 </span><span class="o">:</span>= <span class="n">a</span>.<span class="n">c</span> <span class="n">b</span>.<span class="n">c</span> <span class="n">c</span>.<span class="n">c</span>
<span class="nf">all2</span><span class="o">:</span>                    <span class="c"># 上行`override`是变量强制覆盖关键字！！！！！！！！
</span><span class="c"></span>	@echo <span class="s2">&#34;src2: </span><span class="k">$(</span>src2<span class="k">)</span><span class="s2">&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>make 命令执行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">######普通变量######</span>
make all1 <span class="nv">src1</span><span class="o">=</span>abc       <span class="c1"># 运行命令，</span>
src1: abc                <span class="c1"># 运行结果（Makefile 变量无法覆盖 shell 命令行变量[src1]）。</span>

<span class="c1">######变量覆盖######</span>
make all2 <span class="nv">src2</span><span class="o">=</span>abc       <span class="c1"># 运行命令，</span>
src2: a.c b.c c.c        <span class="c1"># 运行结果（Makefile 变量[src2]强制覆盖 shell 命令行变量）。</span>
</code></pre></td></tr></table>
</div>
</div></details>  
<details close=""><summary>3.3、【<strong>码块</strong>：多行定义】</summary>  
<blockquote>
<p><strong>3.3.1</strong>、Makefile 多行定义的基本语法：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="err">define</span> <span class="err">AA</span>             <span class="c"># 定义 AA 变量为代码块
</span><span class="c"></span><span class="err">command</span>               <span class="c"># 命令，备注：前面无须加【tab键】
</span><span class="c"></span><span class="err">endef</span>                 <span class="c"># 注意：多行定义里面不能有条件判断语句，否则make工具直接抛出错误！
</span><span class="c"></span>
<span class="k">$(</span><span class="nv">AA</span><span class="k">)</span>                 <span class="c"># $(AA) 代表 代码块
</span><span class="c"></span>
<span class="c"># 特别用途-------------
</span><span class="c"></span><span class="err">define</span> <span class="err">LFTAB</span>          <span class="c"># 定义 LFTAB 为【换行+Tab格】，辅助将一行字符串转换为多行字符串命令（替换或插入操作）！
</span><span class="c"></span>

<span class="err">endef</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.3.2</strong>、Makefile 多行定义的常规用法：</p>
</blockquote>
<p>编写 Makefile 文件内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c"># 定义删除命令
</span><span class="c"></span><span class="err">define</span> <span class="err">RUN_RM</span>
<span class="err">rm</span> <span class="err">-f</span> <span class="k">$(</span><span class="nv">objects</span><span class="k">)</span>
<span class="err">rm</span> <span class="err">-f</span> <span class="err">1.o</span> <span class="err">2.o</span>
<span class="err">endef</span>

<span class="c"># make操作目标
</span><span class="c"></span><span class="nv">objects</span> <span class="o">=</span> a.o b.o
<span class="nf">.PHONY</span><span class="o">:</span><span class="n">clean</span>
<span class="nf">clean</span><span class="o">:</span>
	<span class="k">$(</span>RUN_RM<span class="k">)</span>
</code></pre></td></tr></table>
</div>
</div><p>在命令窗口运行命令及结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">make clean              <span class="c1"># 运行命令，当前文件夹下的 a.o b.o 1.o 2.o 文件被删除！</span>
</code></pre></td></tr></table>
</div>
</div></details>  
<details close=""><summary>3.4、【<strong>条件</strong>：判断语句】</summary>  
<blockquote>
<p><strong>3.4.1</strong>、Makefile 条件的基本语法：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="err">ifeq</span> <span class="err">(arg1,arg2)</span>      <span class="c"># 判断 arg1 与 arg2 是否相同
</span><span class="c"></span><span class="err">else</span>
<span class="err">endif</span>

<span class="err">ifneq</span> <span class="err">(arg1,arg2)</span>     <span class="c"># 判断 arg1 与 arg2 是否不相同
</span><span class="c"></span><span class="err">else</span>
<span class="err">endif</span>

<span class="err">ifdef</span> <span class="err">arg</span>             <span class="c"># 判断 如果定义了变量 arg
</span><span class="c"></span><span class="err">else</span>
<span class="err">endif</span>

<span class="err">ifndef</span> <span class="err">arg</span>            <span class="c"># 判断 如果没有定义变量 arg
</span><span class="c"></span><span class="err">else</span>
<span class="err">endif</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.4.2</strong>、Makefile 条件的常规用法：</p>
</blockquote>
<p>编写 Makefile 文件内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c"># 特别注意：！！！！！！！！！！！！！！！！！！！！
</span><span class="c"># 下面的`CC = gcc`后面不能有空格等，否则影响结果！
</span><span class="c"></span><span class="nv">CC</span> <span class="o">=</span> gcc
<span class="nv">objects</span> <span class="o">=</span> a.o b.o
<span class="nf">.PHONY</span><span class="o">:</span><span class="n">clean</span>          <span class="c"># 为了避免出错，使用【.PHONY】说明【clean】是一个伪目标
</span><span class="c"></span><span class="nf">clean</span><span class="o">:</span>                <span class="c"># ！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！
</span><span class="c"></span><span class="err">ifeq</span> <span class="err">(</span><span class="k">$(</span><span class="nv">CC</span><span class="k">)</span><span class="err">,gcc)</span>      <span class="c"># 判断 $(CC) == gcc（注意：`CC = gcc`定义后面不能有任何多余字符，包括空格、注释等！！）
</span><span class="c"></span><span class="err">ifdef</span> <span class="err">objects</span>         <span class="c"># 等同 ifneq ($(objects),)
</span><span class="c"></span>	rm -f <span class="k">$(</span>objects<span class="k">)</span>  <span class="c1"># 删除编译生成的中间文件</span>
<span class="err">endif</span>
<span class="err">else</span>
<span class="err">ifdef</span> <span class="err">objects</span> 
	<span class="nf">rm -f $(objects</span><span class="o">:</span>.<span class="n">o</span>=.<span class="n">obj</span>)
<span class="err">endif</span>
<span class="err">endif</span>
</code></pre></td></tr></table>
</div>
</div><p>在命令窗口运行命令及结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">make clean              <span class="c1"># 运行命令，当前文件夹下的 a.o b.o 文件被删除！</span>
</code></pre></td></tr></table>
</div>
</div></details>  
<details close=""><summary>3.5、【<strong>函数</strong>：功能函数】</summary>  
<blockquote>
<p>在 Makefile 中可以使用函数来处理变量，从而让我们的命令或是规则更为的灵活和智能。make 所支持的函数也不算很多，不过已经足够我们的操作了。函数调用后，函数的返回值可以当做变量来使用。对于 makefile 函数处理的字符串，不应有<code>$</code>及<code>回车</code> <code>换行</code>等控制字符，而且有些符号需要加<code>\</code>符进行转义，例如<code>\\</code>。对于 makefile 函数处理字符串的基本单元为<strong>字段</strong>，它以<code>空格</code> <code>Tab</code>作为分割。<strong>备注</strong>：对于 makefile 函数的控制参数，<code>%</code>是通配符还是普通字符，由具体函数决定！</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">特殊字符</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>%</code></td>
<td style="text-align:left"><code>通配符</code>，匹配零或若干字符</td>
</tr>
<tr>
<td style="text-align:left"><code>\</code></td>
<td style="text-align:left"><code>转义符</code> 或 <code>换行符</code>（注意：作为换行符后面不能有空格!）</td>
</tr>
<tr>
<td style="text-align:left"><code>$</code></td>
<td style="text-align:left"><code>变量符</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>3.5.1</strong>、函数基本语法：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="k">$(</span><span class="nv">func</span> <span class="nv">arg</span>1,<span class="nv">arg</span>2…<span class="k">)</span>             <span class="c"># 函数名和参数之间以“空格”分隔，参数与参数之间以“逗号”分隔。 
</span><span class="c"></span><span class="err">${func</span> <span class="err">arg1,arg2…}</span>             <span class="c"># 同上
</span><span class="c"></span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.5.2</strong>、『字符串、字符段』操作函数：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c"># --------------------------------------------------------------------------------------------------------
</span><span class="c"># 一、字符串/字符段操作函数 ------------------------------------------------------------------------------
</span><span class="c"># --------------------------------------------------------------------------------------------------------
</span><span class="c"></span>
<span class="c"># 01.〖字符串:查找〗函数       （★注意：输入参数的“%”只作为“普通字符”★）
</span><span class="c"></span><span class="k">$(</span><span class="nv">findstring</span> <span class="nv">find_str</span>,<span class="nv">str</span><span class="k">)</span>      <span class="c"># 在“str”字串中查找“find_str”字符串，如果找到则返回“find_str”原字符串（表示“真”的意思），否则返回空字符（表示“假”的意思）
</span><span class="c"></span>                                <span class="c1"># $(findstring a b,a b c) 在“a b c”字串中查找“a b”字串，返回“a b”-&gt;“真”</span>
                                <span class="c1"># $(findstring a b,b c)   在“b c”  字串中查找“a b”字串，返回“”----&gt;“假”（空字符）</span>

<span class="c"># 02.〖字符串:替换〗函数       （★注意：输入参数的“%”只作为“普通字符”★）
</span><span class="c"></span><span class="k">$(</span><span class="nv">subst</span> <span class="nv">from</span>,<span class="nv">to</span>,<span class="nv">str</span><span class="k">)</span>            <span class="c"># 把“str”中的“from”字符串替换为“to”，返回替换后的字符串
</span><span class="c"></span>                                <span class="c1"># $(subst is i,IS I,this is a dog) “this is a dog”替换后为“thIS Is a dog”</span>

<span class="c"># -------------------------------
</span><span class="c"></span>
<span class="c"># 03.【字符段:替换】函数       （★注意：同一控制参数的第一个`%`为通配符，后面的`%`都是普通字符★）
</span><span class="c"></span><span class="k">$(</span><span class="nv">patsubst</span> <span class="nv">from</span>,<span class="nv">to</span>,<span class="nv">str</span><span class="k">)</span>         <span class="c"># 把“str”中的“from”字段替换为“to”，返回替换后的字符串
</span><span class="c"></span>                                <span class="c1"># $(patsubst %.c,%.o,x.c.c aaa.c) “x.c.c aaa.c”替换后为“x.c.o aaa.o”（只能使用“%”通配符）</span>

<span class="c"># 04.【字符段:筛选】函数       （★注意：同上★）
</span><span class="c"></span><span class="k">$(</span><span class="nv">filter</span> <span class="nv">pat</span>1 <span class="nv">par</span>2 ...,<span class="nv">str</span><span class="k">)</span>     <span class="c"># 从“str”中过滤掉【非“pat1”“par2”...】字段
</span><span class="c"></span>                                <span class="c1"># $(filter %.c %.s,aaa.c bbb.c ccc.s ddd.h) “aaa.c bbb.c ccc.s ddd.h”筛选后返回“aaa.c bbb.c ccc.s”</span>

<span class="c"># 05.【字符段:过滤】函数       （★注意：同上★）
</span><span class="c"></span><span class="k">$(</span><span class="nv">filter</span>-<span class="nv">out</span> <span class="nv">pat</span>1 <span class="nv">par</span>2 ...,<span class="nv">str</span><span class="k">)</span> <span class="c"># 从“str”中过滤掉【“pat1”“par2”...】字段
</span><span class="c"></span>                                <span class="c1"># $(filter-out %.c %.s,aaa.c bbb.c ccc.s ddd.h) “aaa.c bbb.c ccc.s ddd.h”过滤后返回“ddd.h”</span>

<span class="c"># -------------------------------
</span><span class="c"></span>
<span class="c"># 06.取出【首个字段】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">firstword</span> <span class="nv">str</span><span class="k">)</span>                <span class="c"># 取出“str”字符串中的首个字段
</span><span class="c"></span>                                <span class="c1"># $(firstword aaa bbb)返回值是“aaa”</span>

<span class="c"># 07.取出【某个字段】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">word</span> <span class="nv">n</span>,<span class="nv">str</span><span class="k">)</span>                   <span class="c"># 取出“str”字符串中第【n】个字段
</span><span class="c"></span>                                <span class="c1"># $(word 2, aaa bbb ccc)返回值是“bbb”</span>

<span class="c"># 08.取出【多个字段】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">wordlist</span> <span class="nv">s</span>,<span class="nv">e</span>,<span class="nv">str</span><span class="k">)</span>             <span class="c"># 取出“str”字符串中第【s~e】个字段
</span><span class="c"></span>                                <span class="c1"># $(wordlist 2, 3, aaa bbb ccc)返返回值是“bbb ccc”</span>

<span class="c"># 09.统计【字段个数】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">words</span> <span class="nv">str</span><span class="k">)</span>                    <span class="c"># 统计“str”字符串中的字段个数
</span><span class="c"></span>                                <span class="c1"># $(words, aaa bbb ccc)返回值是“3”</span>

<span class="c"># 10.排序【全部字段】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">sort</span> <span class="nv">str</span><span class="k">)</span>                     <span class="c"># 给“str”多个字段排序，返回排序后的字符串，同时去除相同字段！！！
</span><span class="c"></span>                                <span class="c1"># $(sort bbb bbb aaa ccc) 返回“aaa bbb ccc”</span>

<span class="c"># 11.整理【全部字段】函数      （★备注：去除多余空字符，空字符包括空格、[Tab]等不可显示字符★）
</span><span class="c"></span><span class="k">$(</span><span class="nv">strip</span> <span class="nv">str</span><span class="k">)</span>                    <span class="c"># 把“str”字串中【多余空字符】格式化为各一个【空格】分隔
</span><span class="c"></span>                                <span class="c1"># $(strip a 	b % c ) “a 	b % c ”去除多余的空格，结果是“a b % c”</span>

<span class="c"># 12.合并【纵向字段】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">join</span> <span class="nv">str</span>1,<span class="nv">str</span>2<span class="k">)</span>               <span class="c"># 把“str1”和“str2”字符串的全部字段进行纵向合并
</span><span class="c"></span>                                <span class="c1"># $(join aaa	bbb , 111 222 333) 返回“aaa111 bbb222 333”</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.5.3</strong>、『文件路径、名称』操作函数：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c"># --------------------------------------------------------------------------------------------------------
</span><span class="c"># 二、文件路径/名称操作函数 ------------------------------------------------------------------------------
</span><span class="c"># --------------------------------------------------------------------------------------------------------
</span><span class="c"></span>
<span class="c"># 13.取【路径】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">dir</span> <span class="nv">str</span><span class="k">)</span>                      <span class="c"># 取出“str”字符串各个字段的路径
</span><span class="c"></span>                                <span class="c1"># $(dir src/aaa.c bbb.c) 返回“src/ ./”</span>

<span class="c"># 14.取【除路径】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">notdir</span> <span class="nv">str</span><span class="k">)</span>                   <span class="c"># 取出“str”字符串各个字段的除去路径内容
</span><span class="c"></span>                                <span class="c1"># $(notdir src/aaa.c bbb) 返回“aaa.c bbb”</span>

<span class="c"># 15.取【扩展名】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">suffix</span> <span class="nv">str</span><span class="k">)</span>                   <span class="c"># 取出“str”字符串各个字段的扩展名（包括除“.”）
</span><span class="c"></span>                                <span class="c1"># $(suffix src/aaa.c bbb.c fff) 返回“.c .c”</span>

<span class="c"># 16.取【除扩展名】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">basename</span> <span class="nv">str</span><span class="k">)</span>                 <span class="c"># 取出“str”字符串各个字段的除去扩展名内容（不取“.”）
</span><span class="c"></span>                                <span class="c1"># $(basename src/aaa.c bbb) 返回“src/aaa bbb”</span>

<span class="c"># 17.加【前缀】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">addprefix</span> <span class="nv">prefix</span>,<span class="nv">str</span><span class="k">)</span>         <span class="c"># 加入“str”字符串各个字段的前缀（例如：加路径）
</span><span class="c"></span>                                <span class="c1"># $(addprefix src/,fff/aaa.c bbb) 返回“src/fff/aaa.c src/bbb”</span>

<span class="c"># 19.加【后缀】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">addsuffix</span> <span class="nv">suffix</span>,<span class="nv">str</span><span class="k">)</span>         <span class="c"># 加入“str”字符串各个字段的后缀（例如：加扩展名）
</span><span class="c"></span>                                <span class="c1"># $(addsuffix .c,src/aaa bbb.) 返回“src/aaa.c bbb..c”</span>

<span class="c"># 19.列出【路径+文件】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">wildcard</span> <span class="nv">str</span>1,<span class="nv">str</span>2,...<span class="k">)</span>       <span class="c"># 列出“str1”“str2”… 路径下的对应文件（需要通配符`*`配合使用）
</span><span class="c"></span>                                <span class="c1"># $(wildcard *.c ./src/*.c) 返回“aaa.c bbb.c ./src/ccc.c”</span>
<span class="c"># 20.得到【绝对路径】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">realpath</span> <span class="nv">path</span><span class="k">)</span>                <span class="c"># 将【相对路径】转换成【绝对路径】，会判断文件和目录是否存在，如果不存在，则返回空。
</span><span class="c"></span><span class="k">$(</span><span class="nv">abspath</span> <span class="nv">path</span><span class="k">)</span>                 <span class="c"># 将【相对路径】转换成【绝对路径】，不判断文件和目录是否存在。
</span><span class="c"></span>                                <span class="c1"># $(realpath .) 返回当前路径的绝对路径，例如“/home/o2ospring/Downloads/makefile_demo”</span>
                                <span class="c1"># $(abspath .)  返回当前路径的绝对路径，例如“/home/o2ospring/Downloads/makefile_demo”</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.5.4</strong>、『相关扩展、控制』操作函数：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c"># --------------------------------------------------------------------------------------------------------
</span><span class="c"># 三、相关扩展/控制操作函数 ------------------------------------------------------------------------------
</span><span class="c"># --------------------------------------------------------------------------------------------------------
</span><span class="c"></span>
<span class="c"># 21.【调用shell命令】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">shell</span> <span class="nv">shell_cmd</span><span class="k">)</span>              <span class="c"># 调用 shell 命令“shell_cmd”运行并将返回信息传递给 Makefile 脚本（因要启动另一个 shell，会影响系统性能!!!）
</span><span class="c"></span>                                <span class="c1"># mk_val = $(shell pwd)   结果“/home/xiaomin/test”（当前所在目录）信息传递给 Makefile 变量 mk_val</span>
                                <span class="c1"># $(shell gcc -MM main.c) 结果“main.o: main.c main.h”</span>

<span class="c"># 22.【变量参数化】函数
</span><span class="c"></span><span class="nv">var</span> <span class="o">=</span> <span class="k">$(</span>1<span class="k">)</span> <span class="k">$(</span>2<span class="k">)</span> ...             <span class="c1"># $(1)表示取第一个参数“str1”，$(2)表示取第二个参数“str2”，……</span>
<span class="k">$(</span><span class="nv">call</span> <span class="nv">var</span>,<span class="nv">str</span>1,<span class="nv">str</span>2,...<span class="k">)</span>       <span class="c"># 将 var 视为函数(调用)，将 str1 视为第一个参数，将 str2 视为第二个参数，则将上行表达式视为函数体！
</span><span class="c"></span>                                <span class="c1"># v3 = $(3) $(1) $(2)</span>
                                <span class="c1"># $(call v3,bb bb,cc,aa)  结果“aa bb bb cc”（注意：bb bb 是一个参数，因为没有用逗号分开！）</span>
                                <span class="c1"># $(call v3,$(shell pwd)) 结果“/home/xiaomin/test”（因其它两个参数为空,即只会得出一个参数）</span>
<span class="c"># 23.【条件判断】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">if</span> <span class="nv">true</span>,<span class="nv">true_str</span>1<span class="k">)</span>            <span class="c"># 如果“true”为非空字符(真)，则返回“true_str1”表态式，否则返回“空”
</span><span class="c"></span><span class="k">$(</span><span class="nv">if</span> <span class="nv">true</span>,<span class="nv">true_str</span>1,<span class="nv">false_str</span>2<span class="k">)</span> <span class="c"># 如果“true”为非空字符(真)，则返回“true_str1”表态式，否则返回“false_str2”表态式
</span><span class="c"></span>                                <span class="c1"># v1 = 0</span>
                                <span class="c1"># $(if v1,$(shell pwd))   结果“/home/xiaomin/test”</span>
                                <span class="c1"># $(if v1,if ...,else..)  结果“if ...”</span>
                                <span class="c1"># $(if $(strip $(SRCS_F)),,$(error No source files)) 表示如果源文件没定义则提示出错信息并停止运行</span>
<span class="c"># 24.【循环处理】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">foreach</span> <span class="nv">v</span>,<span class="nv">str</span>,<span class="nv">text</span><span class="k">)</span>           <span class="c"># 将“str”中的字段逐次取出缓存到“v”再传给“text”表达式处理，最后返回整串字符串（其中 v 为临时变量）
</span><span class="c"></span>                                <span class="c1"># $(foreach v,a b c,$(v).o) 结果“a.o b.o c.o”</span>

<span class="c"># 25.【动态代码】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">eval</span> <span class="nv">text</span><span class="k">)</span>                    <span class="c"># 将“text”的内容将作为 makefile 的一部分而被 make 解析和执行。（注意：text 中应要使用 $$ 来表示 make 的变量符 $）
</span><span class="c"></span>                                <span class="c1"># 通过 $(eval ) $(call ) $(foreach ) 可实现更加灵活地生成 make 代码，并且可实现向生成代码传递参数！！！</span>
                                <span class="c1"># define FUNC</span>
                                <span class="c1"># OBJ_PATH := out</span>
                                <span class="c1"># obj = $$(OBJ_PATH)/$(strip $1)</span>
                                <span class="c1"># $$(obj): $2</span>
                                <span class="c1"># 	gcc $$&lt; -o $$@</span>
                                <span class="c1"># endef</span>
                                <span class="c1"># </span>
                                <span class="c1"># all : out/foo</span>
                                <span class="c1"># </span>
                                <span class="c1"># $(eval $(call FUNC,foo,main.c))    # FUNC 宏就像是函数，foo 为第一个参数，main.c 第二个参数，在代码内分别用 $1 $2 来表示。</span>
<span class="c"># -------------------------------
</span><span class="c"></span>
<span class="c"># 26.【错误控制】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">error</span> <span class="nv">msg</span><span class="k">)</span>                    <span class="c"># 显示“msg”错误信息及强行停止 Makefile 运行
</span><span class="c"></span>                                <span class="c1"># $(error error message!) 结果“error message!.  Stop.”错误信息显示及停止运行</span>


<span class="c"># 27.【警告控制】函数
</span><span class="c"></span><span class="k">$(</span><span class="nv">warning</span> <span class="nv">msg</span><span class="k">)</span>                  <span class="c"># 显示“msg”警告信息但不会停止 Makefile 运行
</span><span class="c"></span>                                <span class="c1"># $(warning warning message!) 结果“warning message!”警告信息显示</span>

<span class="err">备注：make</span> <span class="err">命令执行后有三个退出码：</span>
<span class="err">0</span> <span class="err">--</span> <span class="err">表示成功执行，则返回【0】。</span>
<span class="err">1</span> <span class="err">--</span> <span class="err">如果</span> <span class="err">make</span> <span class="err">运行时出现任何错误，则返回【1】。</span>
<span class="err">2</span> <span class="err">--</span> <span class="err">如果你使用了make的“-q”选项，并且</span> <span class="err">make</span> <span class="err">使得一些目标不需要更新，则返回【2】。</span>

<span class="c"># -------------------------------  
</span><span class="c"></span>
<span class="c"># 28.【变量来源】函数
</span><span class="c"></span><span class="nv">val_in_file</span> <span class="o">:=</span> test_file
<span class="nf">override val_override </span><span class="o">:</span>= <span class="n">test_override</span>

<span class="k">$(</span><span class="nv">origin</span> <span class="nv">not_define</span><span class="k">)</span>    <span class="c"># 结果“undefined”    变量没有定义!!!!!
</span><span class="c"></span><span class="k">$(</span><span class="nv">origin</span> <span class="nv">PATH</span><span class="k">)</span>          <span class="c"># 结果“environment”  shell  的环境变量
</span><span class="c"></span><span class="k">$(</span><span class="nv">origin</span> <span class="nv">val_in_cmd</span><span class="k">)</span>    <span class="c"># 结果“command line” make 命令参数变量（补充：运行命令为 make val_in_cmd=val_cmd）
</span><span class="c"></span><span class="k">$(</span><span class="nv">origin</span> <span class="nv">val_in_file</span><span class="k">)</span>   <span class="c"># 结果“file”         Makefile 用户变量
</span><span class="c"></span><span class="k">$(</span><span class="nv">origin</span> <span class="nv">CC</span><span class="k">)</span>            <span class="c"># 结果“default”      Makefile 默认变量
</span><span class="c"></span><span class="k">$(</span><span class="nv">origin</span> <span class="nv">val_override</span><span class="k">)</span>  <span class="c"># 结果“override”     Makefile 中使用 override 重新定义的变量
</span><span class="c"></span><span class="k">$(</span><span class="nv">origin</span> @<span class="k">)</span>             <span class="c"># 结果“automatic”    Makefile 自动变量（如：$(@)）
</span><span class="c"></span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.5.5</strong>、相关函数例子：</p>
</blockquote>
<details close=""><summary>──点击展开例子──</summary>  
<blockquote>
<p>首先说明，本例子只是展示函数的功能，使用<code>@echo</code>命令打印出其输出结果。<br>
──<strong>测试方法</strong>──<br>
1）Makefile 文件创建：在一目录下创建一个文件名称为 Makefile 或 makefile，并编写内容。<br>
2）Makefile 操作方法：在命令终端里，进入 makefile 所在目录，输入<code>make tN</code>运行（N 为数字）。<br>
──<strong>再次强调</strong>──<br>
1、对于 makefile 函数处理字符串的基本单元为<strong>字段</strong>，它以<code>空格</code> <code>Tab</code>作为分割。<br>
2、对于 makefile 函数的控制参数，<code>%</code>是通配符还是普通字符，由具体函数决定！</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c"># --------------------------------------------------------------------------------------------------------
</span><span class="c"># 一、字符串/字符段操作函数 ------------------------------------------------------------------------------
</span><span class="c"># --------------------------------------------------------------------------------------------------------
</span><span class="c"></span>
<span class="c"># 01.〖字符串:查找〗函数 -------------------------
</span><span class="c"></span><span class="nv">words</span> <span class="o">:=</span> the other the% ath%
<span class="nf">t1</span><span class="o">:</span>
	@echo <span class="s2">&#34;%th%　　findstring: </span><span class="k">$(</span>findstring %th%,<span class="k">$(</span>words<span class="k">))</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;he　　　findstring: </span><span class="k">$(</span>findstring he,<span class="k">$(</span>words<span class="k">))</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;he% 　　findstring: </span><span class="k">$(</span>findstring he%,<span class="k">$(</span>words<span class="k">))</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;other t findstring: </span><span class="k">$(</span>findstring other t,<span class="k">$(</span>words<span class="k">))</span><span class="s2">&#34;</span>
<span class="c"># 运行命令：make t1
</span><span class="c"># 输出结果：
</span><span class="c"># %th%　　findstring:          # 表示“假”（★注:“%”只作“普通字符”）
</span><span class="c"># he　　　findstring: he       # 表示“真”
</span><span class="c"># he% 　　findstring: he%      # 表示“真”（★注:“%”只作“普通字符”）
</span><span class="c"># other t findstring: other t  # 表示“真”
</span><span class="c"></span>
<span class="c"># 02.〖字符串:替换〗函数 -------------------------
</span><span class="c"></span><span class="nv">sources</span> <span class="o">:=</span> fun.c foo.c <span class="se">\
</span><span class="se"></span>           main.c test.c.o
<span class="nf">t2</span><span class="o">:</span>
	@echo <span class="s2">&#34;subst：</span><span class="k">$(</span>subst .c,.o,<span class="k">$(</span>sources<span class="k">))</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;subst：</span><span class="k">$(</span>subst %.c,.o,<span class="k">$(</span>sources<span class="k">))</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;subst：</span><span class="k">$(</span>subst .c f,.o f,<span class="k">$(</span>sources<span class="k">))</span><span class="s2">&#34;</span>
<span class="c"># 运行命令：make t2
</span><span class="c"># 输出结果：
</span><span class="c"># subst：fun.o foo.o main.o test.o.o
</span><span class="c"># subst：fun.c foo.c main.c test.c.o
</span><span class="c"># subst：fun.o foo.c main.c test.c.o
</span><span class="c"></span>
<span class="c">##################################################
</span><span class="c"></span>
<span class="c"># 03.【字符段:替换】函数 -------------------------
</span><span class="c"></span><span class="nv">sources</span> <span class="o">:=</span> fun.c foo.c <span class="se">\
</span><span class="se"></span>           main.c test.c.o
<span class="nf">t3</span><span class="o">:</span>
	@echo <span class="s2">&#34;patsubst：</span><span class="k">$(</span>patsubst .c,.o,<span class="k">$(</span>sources<span class="k">))</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;patsubst：</span><span class="k">$(</span>patsubst %.c,.o,<span class="k">$(</span>sources<span class="k">))</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;patsubst：</span><span class="k">$(</span>patsubst %.c,%.o,<span class="k">$(</span>sources<span class="k">))</span><span class="s2">&#34;</span>
<span class="c"># 运行命令：make t3
</span><span class="c"># 输出结果：
</span><span class="c"># patsubst：fun.c foo.c main.c test.c.o
</span><span class="c"># patsubst：.o .o .o test.c.o
</span><span class="c"># patsubst：fun.o foo.o main.o test.c.o
</span><span class="c"></span>
<span class="c"># 04.【字符段:筛选】函数 -------------------------
</span><span class="c"></span><span class="nv">words</span> <span class="o">:=</span> he the thee athee ffth hen other the% ggthxxaa ggth%aa
<span class="nf">t4</span><span class="o">:</span>
	@echo <span class="s2">&#34;he 　　filter: </span><span class="k">$(</span>filter he,<span class="k">$(</span>words<span class="k">))</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;th%　　filter: </span><span class="k">$(</span>filter th%,<span class="k">$(</span>words<span class="k">))</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;%th　　filter: </span><span class="k">$(</span>filter %th,<span class="k">$(</span>words<span class="k">))</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;%th%aa filter: </span><span class="k">$(</span>filter %th%aa,<span class="k">$(</span>words<span class="k">))</span><span class="s2">&#34;</span>
<span class="c"># 运行命令：make t4
</span><span class="c"># 输出结果：
</span><span class="c"># he 　　filter: he
</span><span class="c"># th%　　filter: the thee the%
</span><span class="c"># %th　　filter: ffth
</span><span class="c"># %th%aa filter: ggth%aa
</span><span class="c"></span>
<span class="c"># 05.【字符段:过滤】函数 -------------------------
</span><span class="c"></span><span class="nv">words</span> <span class="o">:=</span> he the thee athee ffth hen other the% ggthxxaa ggth%aa
<span class="nf">t5</span><span class="o">:</span>
	@echo <span class="s2">&#34;he 　　filter-out: </span><span class="k">$(</span>filter-out he,<span class="k">$(</span>words<span class="k">))</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;th%　　filter-out: </span><span class="k">$(</span>filter-out th%,<span class="k">$(</span>words<span class="k">))</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;%th　　filter-out: </span><span class="k">$(</span>filter-out %th,<span class="k">$(</span>words<span class="k">))</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;%th%aa filter-out: </span><span class="k">$(</span>filter-out %th%aa,<span class="k">$(</span>words<span class="k">))</span><span class="s2">&#34;</span>
<span class="c"># 运行命令：make t5
</span><span class="c"># 输出结果：
</span><span class="c"># he 　　filter: the thee athee ffth hen other the% ggthxxaa ggth%aa
</span><span class="c"># th%　　filter: he athee ffth hen other ggthxxaa ggth%aa
</span><span class="c"># %th　　filter: he the thee athee hen other the% ggthxxaa ggth%aa
</span><span class="c"># %th%aa filter: he the thee athee ffth hen other the% ggthxxaa
</span><span class="c"></span>
<span class="c">##################################################
</span><span class="c"></span>
<span class="c"># 06.取出【首个字段】函数 ------------------------
</span><span class="c"></span><span class="nv">CURRENT_PATH</span> <span class="o">:=</span> <span class="k">$(</span>subst /, ,<span class="k">$(</span>PWD<span class="k">))</span>
<span class="nf">t6</span><span class="o">:</span>
	@echo <span class="s2">&#34;current path: </span><span class="k">$(</span>PWD<span class="k">)</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;current path first word: </span><span class="k">$(</span>firstword <span class="k">$(</span>CURRENT_PATH<span class="k">))</span><span class="s2">&#34;</span>
<span class="c"># 运行命令：make t6
</span><span class="c"># 输出结果：
</span><span class="c"># current path: /home/liao/makefile_test
</span><span class="c"># current path first word: home
</span><span class="c"></span>
<span class="c"># 07.取出【某个字段】函数 ------------------------
</span><span class="c"></span><span class="nv">CURRENT_PATH</span> <span class="o">:=</span> <span class="k">$(</span>subst /, ,<span class="k">$(</span>PWD<span class="k">))</span>
<span class="nf">t7</span><span class="o">:</span>
	@echo <span class="s2">&#34;current path: </span><span class="k">$(</span>PWD<span class="k">)</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;current path second word: </span><span class="k">$(</span>word 2,<span class="k">$(</span>CURRENT_PATH<span class="k">))</span><span class="s2">&#34;</span>
<span class="c"># 运行命令：make t7
</span><span class="c"># 输出结果：
</span><span class="c"># current path: /home/liao/makefile_test
</span><span class="c"># current path second word: liao
</span><span class="c"></span>
<span class="c"># 08.取出【多个字段】函数 ------------------------
</span><span class="c"></span><span class="nv">CURRENT_PATH</span> <span class="o">:=</span> <span class="k">$(</span>subst /, ,<span class="k">$(</span>PWD<span class="k">))</span>
<span class="nf">t8</span><span class="o">:</span>
	@echo <span class="s2">&#34;current path: </span><span class="k">$(</span>PWD<span class="k">)</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;current path second word: </span><span class="k">$(</span>wordlist 2,50,<span class="k">$(</span>CURRENT_PATH<span class="k">))</span><span class="s2">&#34;</span>
<span class="c"># 运行命令：make t8
</span><span class="c"># 输出结果：
</span><span class="c"># current path: /home/liao/makefile_test
</span><span class="c"># current path second word: liao makefile_test
</span><span class="c"></span>
<span class="c"># 09.统计【字段个数】函数 ------------------------
</span><span class="c"></span><span class="nv">CURRENT_PATH</span> <span class="o">:=</span> <span class="k">$(</span>subst /, ,<span class="k">$(</span>PWD<span class="k">))</span>
<span class="nf">t9</span><span class="o">:</span>
	@echo <span class="s2">&#34;current path: </span><span class="k">$(</span>PWD<span class="k">)</span><span class="s2">&#34;</span>
	@echo <span class="s2">&#34;current path words: </span><span class="k">$(</span>words <span class="k">$(</span>CURRENT_PATH<span class="k">))</span><span class="s2">&#34;</span>
<span class="c"># 运行命令：make t9
</span><span class="c"># 输出结果：
</span><span class="c"># current path: /home/liao/makefile_test
</span><span class="c"># current path words: 3
</span><span class="c"></span>
<span class="c"># 10.排序【全部字段】函数 -----------------------
</span><span class="c"></span><span class="nv">source</span> <span class="o">:=</span> b c <span class="m">1</span> <span class="m">2</span> d   <span class="m">0</span> 	c
<span class="nf">t10</span><span class="o">:</span>
	@echo <span class="s2">&#34;sort：</span><span class="k">$(</span>sort <span class="k">$(</span><span class="nb">source</span><span class="k">))</span><span class="s2">&#34;</span>
<span class="c"># 运行命令：make t10
</span><span class="c"># 输出结果：
</span><span class="c"># sort：0 1 2 b c d
</span><span class="c"></span>
<span class="c"># 11.整理【全部字段】函数 -----------------------
</span><span class="c"></span><span class="nf">t11</span><span class="o">:</span>
	@echo <span class="s2">&#34;strip: </span><span class="k">$(</span>strip a  	b		c x  f  <span class="k">)</span><span class="s2">&#34;</span>  <span class="c1"># 包含“Tab”“空格”</span>
<span class="c"># 运行命令：make t11
</span><span class="c"># 输出结果：
</span><span class="c"># strip: a b c x f
</span><span class="c"></span>
<span class="c"># 12.连接【纵向字段】函数 -----------------------
</span><span class="c"></span><span class="nf">t12</span><span class="o">:</span>
	@echo <span class="s2">&#34;join: </span><span class="k">$(</span>join aaa	bbb , <span class="m">111</span> <span class="m">222</span> 333<span class="k">)</span><span class="s2">&#34;</span>
<span class="c"># 运行命令：make t12
</span><span class="c"># 输出结果：
</span><span class="c"># join: aaa111 bbb222 333
</span><span class="c"></span>
<span class="c"># --------------------------------------------------------------------------------------------------------
</span><span class="c"># 二、文件路径/名称操作函数 ------------------------------------------------------------------------------
</span><span class="c"># --------------------------------------------------------------------------------------------------------
</span><span class="c"></span>
<span class="err">待续……</span>

<span class="c"># --------------------------------------------------------------------------------------------------------
</span><span class="c"># 三、相关扩展/控制操作函数 ------------------------------------------------------------------------------
</span><span class="c"># --------------------------------------------------------------------------------------------------------
</span><span class="c"></span>
<span class="c"># 22.【变量参数化】函数 -------------------------
</span><span class="c"></span><span class="err">define</span> <span class="err">target</span>
	<span class="err">@echo</span> <span class="err">$0</span>
	<span class="err">@echo</span> <span class="err">$1</span>
	<span class="err">@echo</span> <span class="err">$2</span>
<span class="err">endef</span>

<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">t</span>22
<span class="nf">t22</span><span class="o">:</span>
	<span class="k">$(</span>call target,hello,work<span class="k">)</span>

<span class="c"># 运行命令：make t22
</span><span class="c"># 输出结果：
</span><span class="c"># target
</span><span class="c"># hello
</span><span class="c"># work
</span><span class="c"></span>
<span class="err">待续……</span>

</code></pre></td></tr></table>
</div>
</div></details>  
</details>  
<details close=""><summary>3.6、【<strong>文件</strong>：包含调用】</summary>  
<blockquote>
<p><strong>3.6.1</strong>、Makefile 文件〖包含〗的基本语法：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c"># 注意：include 前【绝不能】用[Tab键]开始
</span><span class="c"></span><span class="err">include</span> <span class="err">file</span>    <span class="c"># 把其它 Makefile 包含进来，file 是包含进来的文件（可多个文件，也可包括路径）
</span><span class="c"></span>                <span class="c1"># 注意:【包含】不但是把其它 Makefile 代码拷贝过来，还会执行固有的规则！</span>

<span class="err">关于</span> <span class="err">include</span> <span class="err">有两项动作：</span>
<span class="err">(1)</span> <span class="err">包含：把别的</span> <span class="err">Makefile</span> <span class="err">代码拷贝过来，相当于在自身编写这些代码一样。</span>
<span class="err">(2)</span> <span class="err">规则：搜索与包含文件同路径同名称的目标并尝试运行规则！具体有如下：</span>
    <span class="err">只有当【包含文件存在】并且【没找到对应目标</span> <span class="err">或者</span> <span class="err">找到同路径同名称</span>
    <span class="err">[新于规则的实目标](实目标新于依赖、实目标无依赖)】才放弃运行规则，</span>
    <span class="err">否则必定尝试运行规则(在用户操作目标前执行尝试创建或更新包含文件)。</span>
    <span class="err">除上面情形外，当出现包含文件不存在、或找不到对应目标都会抛出错误！</span>
</code></pre></td></tr></table>
</div>
</div><details close=""><summary>──点击展开 include 执行固有规则说明──</summary>  
<blockquote>
<p>一、使用<code>-include</code>包含文件，没有与包含文件同路径同名称的目标：</p>
<p>脚本内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span>  
 
<span class="nf">all</span><span class="o">:</span>  
	@echo <span class="s2">&#34;1.run all...&#34;</span>  
 
<span class="err">-include</span> <span class="err">a.txt</span>  
</code></pre></td></tr></table>
</div>
</div><p>脚本运行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">rm -f a.txt       <span class="c1"># 运行命令，目的是为了保证 a.txt 不能存在  </span>
make              <span class="c1"># 运行命令，执行脚本  </span>
<span class="c1">#                 # 运行结果：■■不运行规则■■。  </span>
<span class="c1"># 1.run all...    # 看到脚本成功执行`all`目标，因`-`会忽略包含文件不存在影响！相当于没有 include 操作！  </span>
touch a.txt       <span class="c1"># 运行命令，创建 a.txt 文件。  </span>
make              <span class="c1"># 运行命令，执行脚本  </span>
<span class="c1">#                 # 运行结果：■■不运行规则■■。  </span>
<span class="c1"># 1.run all...    # 看到脚本成功执行`all`目标，即:【包含文件存在】并且【没找到对应目标】才放弃运行规则●●●●●  </span>
</code></pre></td></tr></table>
</div>
</div></blockquote>
<hr>
<blockquote>
<p>二、使用<code>include</code>包含文件，没有与包含文件同路径同名称的目标：</p>
<p>脚本内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span>  
 
<span class="nf">all</span><span class="o">:</span>  
	@echo <span class="s2">&#34;1.run all...&#34;</span>  
 
<span class="err">include</span> <span class="err">a.txt</span>  
</code></pre></td></tr></table>
</div>
</div><p>脚本运行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">rm -f a.txt       <span class="c1"># 运行命令，目的是为了保证 a.txt 不能存在  </span>
make              <span class="c1"># 运行命令，执行脚本  </span>
<span class="c1">#                 # 运行结果：■■■运行规则■■。出错！因没有找`a.txt`包含文件并且没有同名目标而中止运行！  </span>
<span class="c1"># Makefile:6: a.txt: No such file or directory  </span>
<span class="c1"># make: *** No rule to make target &#39;a.txt&#39;.  Stop.  </span>
touch a.txt       <span class="c1"># 运行命令，创建 a.txt 文件。  </span>
make              <span class="c1"># 运行命令，执行脚本  </span>
<span class="c1">#                 # 运行结果：■■不运行规则■■。  </span>
<span class="c1"># 1.run all...    # 看到脚本成功执行`all`目标，即:【包含文件存在】并且【没找到对应目标】才放弃运行规则●●●●●  </span>
</code></pre></td></tr></table>
</div>
</div></blockquote>
<hr>
<blockquote>
<p>三、使用<code>include</code>包含文件，存在与包含文件同路径同名称的实目标：</p>
<p>脚本内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span>  
 
<span class="nf">all</span><span class="o">:</span>  
	@echo <span class="s2">&#34;1.run all...&#34;</span>  
 
<span class="err">include</span> <span class="err">a.txt</span>  
 
<span class="nf">a.txt</span><span class="o">:</span>  
	@echo <span class="s2">&#34;2.run a.txt...&#34;</span>  
</code></pre></td></tr></table>
</div>
</div><p>脚本运行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">rm -f a.txt       <span class="c1"># 运行命令，目的是为了保证 a.txt 不能存在  </span>
make              <span class="c1"># 运行命令，执行脚本  </span>
<span class="c1">#                 # 运行结果：■■■运行规则■■。虽找不出包含文件(a.txt)，但仍然运行规则！！！！  </span>
<span class="c1"># Makefile:6: a.txt: No such file or directory  </span>
<span class="c1"># 2.run a.txt...  # 先运行与包含文件同路径同名称的目标(a.txt)◆◆◆◆◆  </span>
<span class="c1"># 1.run all...    # 再运行用户操作的目标(all)  </span>
touch a.txt       <span class="c1"># 运行命令，创建 a.txt 文件。  </span>
make              <span class="c1"># 运行命令，执行脚本  </span>
<span class="c1">#                 # 运行结果：■■不运行规则■■。  </span>
<span class="c1"># 1.run all...    # 看到脚本只执行`all`目标，即:【包含文件存在】并且【找到同路径同名称[实目标无依赖]】才放弃运行规则●●●●●  </span>
</code></pre></td></tr></table>
</div>
</div></blockquote>
<hr>
<blockquote>
<p>四、使用<code>include</code>包含文件，存在与包含文件同路径同名称的实目标，以及目标有依赖文件：</p>
<p>脚本内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span>  
 
<span class="nf">all</span><span class="o">:</span>  
	@echo <span class="s2">&#34;1.run all...&#34;</span>  
 
<span class="err">include</span> <span class="err">a.txt</span>  
 
<span class="nf">a.txt</span><span class="o">:</span> <span class="n">b</span>.<span class="n">txt</span>  
	@echo <span class="s2">&#34;2.run a.txt...&#34;</span>  
</code></pre></td></tr></table>
</div>
</div><p>脚本运行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">rm -f a.txt b.txt <span class="c1"># 运行命令，目的是为了保证 a.txt 和 b.txt 不能存在  </span>
make              <span class="c1"># 运行命令，执行脚本  </span>
<span class="c1">#                 # 运行结果：■■■运行规则■■。虽找不出包含文件(a.txt)，但仍然运行规则，不过因依赖文件(b.txt)不存在抛出错误并结束运行！！！  </span>
<span class="c1"># Makefile:6: a.txt: No such file or directory  </span>
<span class="c1"># make: *** No rule to make target &#39;b.txt&#39;, needed by &#39;a.txt&#39;.  Stop.  </span>
rm -f a.txt b.txt <span class="c1"># 运行命令，删除文件  </span>
touch a.txt       <span class="c1"># 运行命令，先创建目标文件(a.txt)┐  </span>
touch b.txt       <span class="c1"># 运行命令，再创建依赖文件(b.txt)┴→【即:(a.txt)旧于(b.txt)】  </span>
make              <span class="c1"># 运行命令，执行脚本  </span>
<span class="c1">#                 # 运行结果：■■■运行规则■■。  </span>
<span class="c1"># 2.run a.txt...  # 先运行与包含文件同路径同名称的目标(a.txt)◆◆◆◆◆  </span>
<span class="c1"># 1.run all...    # 再运行用户操作的目标(all)  </span>
rm -f a.txt b.txt <span class="c1"># 运行命令，删除文件  </span>
touch b.txt       <span class="c1"># 运行命令，先创建目标文件(b.txt)┐  </span>
touch a.txt       <span class="c1"># 运行命令，再创建依赖文件(a.txt)┴→【即:(a.txt)新于(b.txt)】  </span>
make              <span class="c1"># 运行命令，执行脚本  </span>
<span class="c1">#                 # 运行结果：■■不运行规则■■。  </span>
<span class="c1"># 1.run all...    # 看到脚本只执行`all`目标，即:【包含文件存在】并且【找到同路径同名称[实目标新于依赖]】才放弃运行规则●●●●●  </span>
</code></pre></td></tr></table>
</div>
</div></blockquote>
<p>总结：Makefile 包含文件时，不但是把其它 Makefile 代码拷贝过来，还会搜索与包含文件<a href="#XXXX" rel="">同路径同名称</a>的目标并尝试运行规则！具体有如下：只有当【<a href="#XXXX" rel="">包含文件存在</a>】并且【<a href="#XXXX" rel="">没找到对应目标</a> 或者 找到同路径同名称新于规则的实目标(<a href="#XXXX" rel="">实目标新于依赖</a>、<a href="#XXXX" rel="">实目标无依赖</a>)】才放弃运行规则，否则必定运行规则(它优先在用户操作的所有目标前执行，它总是会尝试创建或更新包含文件)。除上面情形外，当出现包含文件不存在、或找不到对应目标都会抛出错误！</p>
<!--  
https://www.jianshu.com/p/a512424793dc  
https://blog.csdn.net/qq_29713123/article/details/122469145  
-->  
</details>  
<blockquote>
<p><strong>3.6.2</strong>、Makefile 文件〖包含〗的常规用法：</p>
</blockquote>
<p>【父】Makefile 文件内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c">####包含子Makefile文件####
</span><span class="c"></span><span class="err">include</span> <span class="err">./subdir/Subfile</span>

<span class="nv">aaaa</span> <span class="o">=</span> 1.i 2.i
<span class="nf">.PHONY</span><span class="o">:</span><span class="n">clean</span>
<span class="nf">clean</span><span class="o">:</span> <span class="n">clean_</span>1 <span class="n">clean_</span>2
<span class="nf">clean_1</span><span class="o">:</span>
	rm -f x.c y.c              <span class="c1"># 删除 x.c y.c 文件 </span>
</code></pre></td></tr></table>
</div>
</div><p>【子】Subfile 文件内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c">############################
</span><span class="c"># 此文件在`subdir`子文件夹下
</span><span class="c">############################
</span><span class="c"></span>
<span class="nf">all_1</span><span class="o">:</span> <span class="n">a</span>.<span class="n">c</span> <span class="n">b</span>.<span class="n">c</span>
	gcc $^ -o <span class="nv">$@</span>
	                           <span class="c1"># 编译 a.c b.c 为 all_1 执行文件</span>
<span class="nf">.PHONY</span><span class="o">:</span><span class="n">clean_</span>2 
<span class="nf">clean_2</span><span class="o">:</span>  
	rm -f *.o <span class="k">$(</span>aaaa<span class="k">)</span>          <span class="c1"># 删除编译的中间文件</span>
</code></pre></td></tr></table>
</div>
</div><p>在命令窗口运行命令及结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">make clean                     <span class="c1"># 运行命令，</span>
                               <span class="c1"># 结果：删除【当前文件夹】下的 x.c y.c 1.i 2.i 文件及扩展名为 *.o 的文件！</span>
                               <span class="c1"># 注意：命令`rm -f *.o $(aaaa)`并不是对`subdir`子文件夹操作！</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.6.3</strong>、Makefile 文件【<strong>调用</strong>】的基本语法：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c"># 注意：调用其实就是直接运行命令，所以行首记得加[Tab]键
</span><span class="c"></span>	<span class="nb">cd</span> subdir <span class="o">&amp;&amp;</span> <span class="k">$(</span>MAKE<span class="k">)</span> tag  <span class="c1"># 表示进入 subdir 目录，并且运行`$(MAKE) tag`命令（默认命令是`make`，即 `make tag`）</span>
	<span class="k">$(</span>MAKE<span class="k">)</span> tag -C subdir     <span class="c1"># 同上</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.6.4</strong>、Makefile 文件【<strong>调用</strong>】的常规用法：</p>
</blockquote>
<p>【父】Makefile 文件内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="nf">all_1</span><span class="o">:</span>
	<span class="nb">cd</span> subdir <span class="o">&amp;&amp;</span> <span class="k">$(</span>MAKE<span class="k">)</span> all_1
	                           <span class="c1"># 表示调用下级目录 subdir 的 Makefile 文件，执行其目标 all_1</span>
	                           <span class="c1"># $(MAKE) 为当前使用的 make 命令工具（默认命令是`make`）（等同 cd subdir &amp;&amp; make all_1）</span>
<span class="nf">all_2</span><span class="o">:</span>
	<span class="k">$(</span>MAKE<span class="k">)</span> clean_2 -C subdir
	                           <span class="c1"># 表示调用下级目录 subdir 的 Makefile 文件，执行其目标 clean_2</span>
	                           <span class="c1"># $(MAKE) 为当前使用的 make 命令工具（默认命令是`make`）（等同 make clean_2 -C subdir）</span>
	rm -f x.c y.c              <span class="c1"># 同时删除当前父级文件夹下的 x.c y.c 文件</span>
</code></pre></td></tr></table>
</div>
</div><p>【子】Makefile 文件内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c">############################
</span><span class="c"># 此文件在`subdir`子文件夹下
</span><span class="c">############################
</span><span class="c"></span>
<span class="nf">all_1</span><span class="o">:</span> <span class="n">a</span>.<span class="n">c</span> <span class="n">b</span>.<span class="n">c</span>
	gcc $^ -o <span class="nv">$@</span>
	                           <span class="c1"># 编译 a.c b.c 为 all_1 执行文件</span>
<span class="nf">.PHONY</span><span class="o">:</span><span class="n">clean_</span>2 
<span class="nf">clean_2</span><span class="o">:</span>  
	rm -f *.i *.s *.o
	                           <span class="c1"># 删除编译的中间文件</span>
</code></pre></td></tr></table>
</div>
</div><p>在命令窗口运行命令及结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">make all_1                     <span class="c1"># 运行命令，编译【subdir】文件夹下的 a.c b.c 源文件！</span>
make all_2                     <span class="c1"># 运行命令，结果【subdir】文件夹下扩展名为 *.i *.s *.o 的文件被删除，</span>
                               <span class="c1">#             以及当前父级文件夹下的 x.c y.c 文件被删除！！！！！！！</span>
							   
</code></pre></td></tr></table>
</div>
</div></details>  
<details close=""><summary>3.7、【<strong>路径</strong>：搜索目录】</summary>  
<blockquote>
<p><strong>3.7.1</strong>、Makefile 文件【<strong>搜索目录</strong>】的基本语法：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c"># 方式一：
</span><span class="c"></span><span class="nv">VPATH</span> <span class="o">=</span> directories            <span class="c1"># `添加`搜索目录&lt;directories&gt;，多个目录用冒号或者空格隔开。备注：VPATH 是`变量`！</span>
<span class="c"># 方式二：
</span><span class="c"></span><span class="err">vpath</span> <span class="err">pattern</span> <span class="err">directories</span>      <span class="c"># `添加`指定&lt;pattern&gt;文件类型的搜索目录为&lt;directories&gt;，多个目录用冒号或者空格隔开。
</span><span class="c"></span><span class="err">vpath</span> <span class="err">pattern</span>                  <span class="c"># `清除`指定&lt;pattern&gt;文件类型的搜索目录。
</span><span class="c"></span><span class="err">vpath</span>                          <span class="c"># `清除所有`已被设置好了的文件搜索目录。
</span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.7.2</strong>、Makefile 文件【<strong>搜索目录</strong>】的常规用法：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="nv">VPATH</span> <span class="o">=</span> src:hard/board   <span class="c1"># 设置相关文件可能所在的目录&#34;src&#34;和&#34;hard/board&#34;</span>
<span class="nf">vpath %.c src</span><span class="o">:</span><span class="n">hard</span>/<span class="n">board</span> <span class="c"># 增加&#34;.c&#34;源文件可能所在的目录&#34;src&#34;
</span><span class="c"></span><span class="err">vpath</span> <span class="err">%.h</span> <span class="err">include</span>        <span class="c"># 增加&#34;.h&#34;头文件可能所在的目录&#34;include&#34;
</span><span class="c"></span><span class="err">vpath</span> <span class="err">%</span> <span class="err">modules</span>          <span class="c"># 增加&#34;任意&#34;文件可能所在的目录&#34;modules&#34;
</span><span class="c"></span><span class="err">vpath</span> <span class="err">%.cpp</span>              <span class="c"># 清除之前增加的&#34;.cpp&#34;源文件全部目录
</span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>3.7.3</strong>、Makefile 文件【VPATH】与【vpath】要点说明：</p>
</blockquote>
<p>1、在实际应用工程中，有大量的源文件和头文件存放在不同的目录中，如果不指出搜寻目录，很可能出现某些文件找不到文件的情况！<br>
2、VPATH 是<code>变量</code>，vpath 只是<code>关键字</code>！vpath 的功能稍强以及更细化更为灵活一些。<br>
3、VPATH、vpath 只对 make 工具起作用，但对其调用的其它工具（如：gcc）不起作用！<br>
4、对于使用 vpath 为同一类型文件设置多个搜索目录时，强烈建议使用一个 vpath 设置，不建议使用多个 vpath 来设置。因为某环境下可能是“追加”搜索目录，但另一环境下则可能是“取代”之前设置的搜索目录！</p>
<!--  
https://blog.csdn.net/fwq_qwert/article/details/81220830  
https://blog.csdn.net/dongzhishang/article/details/27084105  
https://blog.csdn.net/shallnet/article/details/38070745  
-->  
</details>  
<details close=""><summary>3.8、【基本 makefile】</summary>  
<blockquote>
<p>makefile 脚本基础写法：（<a href="https://github.com/o2ospring/makefile_demo" target="_blank" rel="noopener noreffer">展示例子：1_micro</a>）</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c">####################################################
</span><span class="c"># 1、本案例展示多个文件编译和链接。
</span><span class="c"># 2、无论我们写再复杂的 Makefile，最终展开所有变量和
</span><span class="c">#    脚本语句后，与本例 makefile 展示的形式都是一样，
</span><span class="c">#    不一样的只是展开的目标更多、每个目标的依赖更多、
</span><span class="c">#    每个目标的操作命令更多而已！
</span><span class="c"># 3、补充说明：脚本所有内容(包括变量、函数等)展开后
</span><span class="c">#    都是一组字符串，最终就不存在变量这类的内容了！
</span><span class="c">####################################################
</span><span class="c"></span>
<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span>
<span class="nf">all</span><span class="o">:</span> <span class="n">main</span>
<span class="nf">main</span><span class="o">:</span>    <span class="n">hello</span>.<span class="n">o</span> <span class="n">test</span>.<span class="n">o</span> <span class="n">main</span>.<span class="n">o</span>
	gcc  hello.o test.o main.o -o main  <span class="c1"># 链接</span>

<span class="nf">hello.o</span><span class="o">:</span> <span class="n">hello</span>.<span class="n">c</span> <span class="n">hello</span>.<span class="n">h</span>
<span class="nf">hello.o</span><span class="o">:</span> <span class="n">hello</span>.<span class="n">c</span>
	gcc -c hello.c -o hello.o           <span class="c1"># 编译</span>

<span class="nf">test.o</span><span class="o">:</span> <span class="n">test</span>.<span class="n">c</span> <span class="n">test</span>.<span class="n">h</span>
<span class="nf">test.o</span><span class="o">:</span> <span class="n">test</span>.<span class="n">c</span>
	gcc -c test.c -o test.o             <span class="c1"># 编译</span>

<span class="nf">main.o</span><span class="o">:</span> <span class="n">main</span>.<span class="n">c</span> <span class="n">main</span>.<span class="n">h</span> <span class="n">hello</span>.<span class="n">h</span> <span class="n">test</span>.<span class="n">h</span>
<span class="nf">main.o</span><span class="o">:</span> <span class="n">main</span>.<span class="n">c</span>
	gcc -c main.c -o main.o             <span class="c1"># 编译</span>
<span class="c">#	@echo $^                            # 如果开启打印，就会发现【$^】为【main.c main.h hello.h test.h】！
</span><span class="c"></span>
<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">clean</span>                           <span class="c"># 为了避免出错，使用 .PHONY 说明 clean 是一个伪目标
</span><span class="c"></span><span class="nf">clean</span><span class="o">:</span>
	rm -f main.o test.o hello.o main    <span class="c1"># 删除编译生成的文件</span>

</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="../img/20200915_23.jpg"
        data-srcset="../img/20200915_23.jpg, ../img/20200915_23.jpg 1.5x, ../img/20200915_23.jpg 2x"
        data-sizes="auto"
        alt="../img/20200915_23.jpg"
        title="多个文件编译图解" /><br>
从此图可以理解 makefile 为什么与编译过程是倒过来写的。它与我们访问文件夹路径是一样的，先是根目录，再下一级目录，这样可以方便 make 工具快速分析出 makefile 里面要操作的文件的依赖关系！注意执行的次序则是反过来：先执行最深层的依赖，再逐级往上执行目标！</p>
<blockquote>
<p>Makefile 编译多个文件写法：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c">####################################################
</span><span class="c"># 方法一：
</span><span class="c"># 【动态的多目标语句】编译出多个目标文件，特点如下：
</span><span class="c"># 1、[目标文件]须【指出路径】，否则就是当前目录下；
</span><span class="c"># 2、[目标文件]从【上级依赖】中获得；
</span><span class="c"># 3、[依赖文件]从【搜索目录】下寻找；
</span><span class="c"># 4、[目标文件]与[依赖文件]为【同名】的不同类型文件；
</span><span class="c"># 5、[目标文件]与[依赖文件]为【一对一】关系。
</span><span class="c">####################################################
</span><span class="c"></span><span class="nf">all</span><span class="o">:</span> <span class="n">out</span>/<span class="n">main</span>.<span class="n">o</span> <span class="n">out</span>/<span class="n">foo</span>.<span class="n">o</span>

<span class="nf">out/%.o</span><span class="o">:</span> %.<span class="n">c</span>
	gcc -c $&lt; -o <span class="nv">$@</span>

<span class="c">####################################################
</span><span class="c"># 方法二：（--前提：make 的版本 3.81 或更高版本--）
</span><span class="c"># 【动态代码】生成多段编译语句，每段编译一个文件：
</span><span class="c"># 1、使用 define      实现一个伪函数体；(变量用 $$)
</span><span class="c"># 2、使用 $(call )    实现调用一个伪函数并传递参数；
</span><span class="c"># 3、使用 $(eval )    将表达式(字符串)转为脚本代码；
</span><span class="c"># 4、使用 $(foreach ) 从一串字符串中依次取出一个字
</span><span class="c">#    段作为入口参数并运行伪函数体。
</span><span class="c">####################################################
</span><span class="c"></span><span class="err">define</span> <span class="err">FUNC</span>
<span class="nf">$1</span><span class="o">:</span> $2
	gcc -c -o <span class="nv">$$</span>@ <span class="nv">$$</span>&lt;
<span class="err">endef</span>

<span class="nv">SRCS_F</span> <span class="o">:=</span> app/main.c usr/foo.c
<span class="nf">all</span><span class="o">:</span> <span class="k">$(</span><span class="nv">addprefix</span> <span class="nv">out</span>/,<span class="k">$(</span><span class="nv">notdir</span> <span class="k">$(</span><span class="nv">SRCS_F</span>:%.<span class="nv">c</span>=%.<span class="nv">o</span><span class="k">)))</span>

<span class="nf">$(foreach v,$(SRCS_F),$(eval $(call FUNC,$(addprefix out/,$(notdir $(v</span><span class="o">:</span>%.<span class="n">c</span>=%.<span class="n">o</span>)))<span class="p">,</span><span class="k">$(</span><span class="nv">v</span><span class="k">)</span>)))

</code></pre></td></tr></table>
</div>
</div></details>  
<details close=""><summary>3.9、【实例 makefile】</summary>  
<details close=""><summary>3.9.1、【写法一】</summary>  
<blockquote>
<p><strong>写法一</strong>：使用统一参数编译源码文件，不支持为一些模块定制编译参数，适合一些中小型的项目工程。（<a href="https://github.com/o2ospring/makefile_demo" target="_blank" rel="noopener noreffer">展示例子：2_medium</a>）</p>
</blockquote>
<p>◆◆【脚本剧情主线】</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="nf">exe</span><span class="o">:</span> <span class="n">xxx</span>.<span class="n">o</span> <span class="n">yyy</span>.<span class="n">o</span>          <span class="c"># 生成执行文件：使用编译工具(如:gcc)来编译生成最终的执行文件
</span><span class="c"></span><span class="nf">xxx.o xxx.d</span><span class="o">:</span> <span class="n">xxx</span>.<span class="n">c</span> <span class="n">xxx</span>.<span class="n">h</span>  <span class="c"># 告知依赖关系：告知脚本工具(make)中间文件依赖的源码文件及其包含的文件
</span><span class="c"></span><span class="nf">xxx.d</span><span class="o">:</span> <span class="n">xxx</span>.<span class="n">c</span>              <span class="c"># 生成依赖信息：借助编译工具(如:gcc)来生成源码文件的包含文件的依赖关系
</span><span class="c"></span><span class="nf">xxx.o</span><span class="o">:</span> <span class="n">xxx</span>.<span class="n">c</span>              <span class="c"># 生成中间文件：使用编译工具(如:gcc)来编译生成中间文件
</span><span class="c"></span>
</code></pre></td></tr></table>
</div>
</div><p>◆①【脚本主要内容】</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c">####################################################
</span><span class="c"># 1、配置编译相关参数、编译文件(夹)、目标及中间文件
</span><span class="c">####################################################
</span><span class="c"></span>
<span class="c"># 定义生成目标，包括其路径及文件名【只能是一个对象】
</span><span class="c"></span><span class="nv">TARGET</span> <span class="o">=</span> ./build/app.exe

<span class="c"># 定义中间文件夹，用于存放中间文件【只能是一个对象】
</span><span class="c"></span><span class="nv">OBJS_D</span> <span class="o">=</span> ./build/

<span class="c"># 添加编译源文件，包括路径及文件名【多个用空格分隔】
</span><span class="c"></span><span class="nv">SRCS_F</span> <span class="o">=</span> ./app/main.c                             <span class="se">\
</span><span class="se"></span>         ./usr/hello.c                            <span class="se">\
</span><span class="se"></span>         ./usr/test.c

<span class="c"># 添加编译文件夹，要指定文件扩展名【多个用空格分隔】
</span><span class="c"></span><span class="nv">SRCS_D</span> <span class="o">=</span> ./modules/led/*.c                        <span class="se">\
</span><span class="se"></span>         ./modules/delay/*.c

<span class="c"># 添加编译库文件，包括路径及文件名【多个用空格分隔】
</span><span class="c"></span><span class="nv">LIBS</span>   <span class="o">=</span> 

<span class="c"># 添加源码文件及包含文件所在的路径【多个用空格分隔】
</span><span class="c"></span><span class="nv">VPATH</span>  <span class="o">=</span> ./app                                    <span class="se">\
</span><span class="se"></span>         ./usr/                                   <span class="se">\
</span><span class="se"></span>         ./modules/led/                           <span class="se">\
</span><span class="se"></span>         ./modules/delay

<span class="c"># 定义编译器及其环境相关参数
</span><span class="c"></span><span class="nv">CC</span> <span class="o">=</span> gcc
<span class="nv">RM</span> <span class="o">=</span> rm
<span class="nv">CFLAG_L</span> <span class="o">=</span> 
<span class="nv">CFLAG_O</span> <span class="o">=</span> -c -W -Wall
<span class="nv">CFLAG_M</span> <span class="o">=</span> -MMD -MP -MF<span class="s2">&#34;</span><span class="k">$(</span>@:%.o<span class="o">=</span>%.d<span class="k">)</span><span class="s2">&#34;</span>
<span class="nv">RMFLAGS</span> <span class="o">=</span> -fr
<span class="nv">MKDIR</span>   <span class="o">=</span> mkdir -p
<span class="c">#ECHO_SET = @set -e
</span><span class="c">#ECHO_END = 
</span><span class="c"></span>
<span class="c"># 生成源文件包含路径选项参数
</span><span class="c"></span><span class="err">ifdef</span> <span class="err">VPATH</span>
<span class="nv">SRCS_INC</span> <span class="o">:=</span> <span class="k">$(</span>addprefix -I,<span class="k">$(</span>strip <span class="k">$(</span>VPATH<span class="k">)))</span>
<span class="err">endif</span>

<span class="c">####################################################
</span><span class="c"># 2、根据上面的相关配置，生成包括路径的相关文件对象
</span><span class="c">####################################################
</span><span class="c"></span>
<span class="nv">VPATH</span> <span class="o">:=</span> <span class="k">$(</span>addsuffix /,<span class="k">$(</span>VPATH<span class="k">))</span>
<span class="nv">VPATH</span> <span class="o">:=</span> <span class="k">$(</span>subst //,/,<span class="k">$(</span>VPATH<span class="k">))</span>
<span class="nv">SRCS_INC</span> <span class="o">:=</span> <span class="k">$(</span>addsuffix /,<span class="k">$(</span>SRCS_INC<span class="k">))</span>
<span class="nv">SRCS_INC</span> <span class="o">:=</span> <span class="k">$(</span>subst //,/,<span class="k">$(</span>SRCS_INC<span class="k">))</span>
<span class="nv">OBJS_D</span> <span class="o">:=</span> <span class="k">$(</span>addsuffix /,<span class="k">$(</span>OBJS_D<span class="k">))</span>
<span class="nv">OBJS_D</span> <span class="o">:=</span> <span class="k">$(</span>subst //,/,<span class="k">$(</span>OBJS_D<span class="k">))</span>
<span class="nv">DEPS_D</span> <span class="o">:=</span> <span class="k">$(</span>OBJS_D<span class="k">)</span>
<span class="nv">DIRS</span> <span class="o">:=</span> <span class="k">$(</span>sort <span class="k">$(</span>OBJS_D<span class="k">)</span> <span class="k">$(</span>dir <span class="k">$(</span>TARGET<span class="k">)))</span>
<span class="nv">SRCS</span> <span class="o">:=</span> <span class="k">$(</span>filter %.c, <span class="k">$(</span>SRCS_F<span class="k">)</span> <span class="k">$(</span>wildcard <span class="k">$(</span>SRCS_D<span class="k">)))</span>
<span class="nv">OBJS</span> <span class="o">:=</span> <span class="k">$(</span>SRCS:.c<span class="o">=</span>.o<span class="k">)</span>
<span class="nv">OBJS</span> <span class="o">:=</span> <span class="k">$(</span>addprefix <span class="k">$(</span>OBJS_D<span class="k">)</span>,<span class="k">$(</span>notdir <span class="k">$(</span>OBJS<span class="k">)))</span>
<span class="nv">DEPS</span> <span class="o">:=</span> <span class="k">$(</span>SRCS:.c<span class="o">=</span>.d<span class="k">)</span>
<span class="nv">DEPS</span> <span class="o">:=</span> <span class="k">$(</span>addprefix <span class="k">$(</span>OBJS_D<span class="k">)</span>,<span class="k">$(</span>notdir <span class="k">$(</span>DEPS<span class="k">)))</span>
<span class="nv">OBJX</span> <span class="o">:=</span> <span class="k">$(</span>sort <span class="k">$(</span>OBJS<span class="k">)</span> <span class="k">$(</span>DEPS<span class="k">)</span> <span class="k">$(</span>addsuffix .tmp,<span class="k">$(</span>DEPS<span class="k">)))</span>
<span class="nv">LIBS</span> <span class="o">:=</span> <span class="k">$(</span>sort <span class="k">$(</span>LIBS<span class="k">))</span>

<span class="err">ifdef</span> <span class="err">VPATH</span>
<span class="nv">CFLAG_O</span> <span class="o">+=</span> <span class="k">$(</span>SRCS_INC<span class="k">)</span>
<span class="c">#CFLAG_M += $(SRCS_INC)
</span><span class="c"></span><span class="err">endif</span>

<span class="c">####################################################
</span><span class="c"># 3、执行创建文件夹、生成依赖、编译、删除等相关操作
</span><span class="c">####################################################
</span><span class="c"></span>
<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span> <span class="n">clean</span> <span class="n">echo</span>

<span class="nf">all</span><span class="o">:</span> <span class="k">$(</span><span class="nv">TARGET</span><span class="k">)</span>

<span class="c"># 非执行&#34;clean/echo&#34;才包含
</span><span class="c"></span><span class="err">ifneq</span> <span class="err">(</span><span class="k">$(</span><span class="nv">MAKECMDGOALS</span><span class="k">)</span><span class="err">,clean)</span>
<span class="err">ifneq</span> <span class="err">(</span><span class="k">$(</span><span class="nv">MAKECMDGOALS</span><span class="k">)</span><span class="err">,echo)</span>
<span class="err">-include</span> <span class="k">$(</span><span class="nv">DEPS</span><span class="k">)</span>
<span class="err">endif</span>
<span class="err">endif</span>

<span class="c"># 编译出最终执行文件
</span><span class="c"></span><span class="nf">$(TARGET)</span><span class="o">:</span> <span class="k">$(</span><span class="nv">OBJS</span><span class="k">)</span> <span class="k">$(</span><span class="nv">LIBS</span><span class="k">)</span>
	@echo <span class="s2">&#34;[2]making </span><span class="nv">$@</span><span class="s2">...&#34;</span>
	@<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAG_L<span class="k">)</span> -o <span class="nv">$@</span> <span class="k">$(</span>filter %.o, $^<span class="k">)</span> <span class="k">$(</span>LIBS<span class="k">)</span>

<span class="c"># 编译出中间目标文件
</span><span class="c"></span><span class="nf">$(OBJS_D)%.o</span><span class="o">:</span> %.<span class="n">c</span>
	@echo <span class="s2">&#34;[1]making </span><span class="nv">$@</span><span class="s2">...&#34;</span>
	@<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAG_O<span class="k">)</span> <span class="k">$(</span>CFLAG_M<span class="k">)</span> $&lt; -o <span class="nv">$@</span>

<span class="c"># 清除目标及执行文件
</span><span class="c"></span><span class="nf">clean</span><span class="o">:</span>
	<span class="k">$(</span>MKDIR<span class="k">)</span> <span class="k">$(</span>DIRS<span class="k">)</span>
	<span class="k">$(</span>RM<span class="k">)</span> <span class="k">$(</span>RMFLAGS<span class="k">)</span> <span class="k">$(</span>OBJX<span class="k">)</span> <span class="k">$(</span>TARGET<span class="k">)</span>

<span class="c"># 查看变量对象相关值
</span><span class="c"></span><span class="nf">echo</span><span class="o">:</span>
	<span class="k">$(</span>MKDIR<span class="k">)</span> <span class="k">$(</span>DIRS<span class="k">)</span>
	@echo <span class="s2">&#34;VPATH: </span><span class="k">$(</span>VPATH<span class="k">)</span><span class="s2">&#34;</span>      <span class="c1"># VPATH 为[make]工具增加搜索目录</span>
	@echo <span class="s2">&#34;DIRS: </span><span class="k">$(</span>DIRS<span class="k">)</span><span class="s2">&#34;</span>        <span class="c1"># DIRS 为编译过程需要创建的文件夹（如：build/）</span>
	@echo <span class="s2">&#34;SRCS: </span><span class="k">$(</span>SRCS<span class="k">)</span><span class="s2">&#34;</span>        <span class="c1"># SRCS 为全部源码文件及其路径    （如：usr/hello.c）</span>
	@echo <span class="s2">&#34;OBJS: </span><span class="k">$(</span>OBJS<span class="k">)</span><span class="s2">&#34;</span>        <span class="c1"># OBJS 为全部中间目标文件及其路径（如：build/hello.o）</span>
	@echo <span class="s2">&#34;DEPS: </span><span class="k">$(</span>DEPS<span class="k">)</span><span class="s2">&#34;</span>        <span class="c1"># DEPS 为全部依赖信息文件及其路径(源码文件包含其它文件的信息)（如：build/hello.d）</span>
	@echo <span class="s2">&#34;OBJX: </span><span class="k">$(</span>OBJX<span class="k">)</span><span class="s2">&#34;</span>        <span class="c1"># OBJX 为所有中间文件及其路径(包括：OBJS 和 DEPS)</span>
	@echo <span class="s2">&#34;LIBS: </span><span class="k">$(</span>LIBS<span class="k">)</span><span class="s2">&#34;</span>        <span class="c1"># LIBS 为编译包含的库文件及其路径（如：build/abc.a）</span>
	@echo <span class="s2">&#34;CFLAG_O: </span><span class="k">$(</span>CFLAG_O<span class="k">)</span><span class="s2">&#34;</span>  <span class="c1"># CFLAG_O 编译中间目标文件的选项参数（如：-c -I./usr/）</span>
	@echo <span class="s2">&#34;CFLAG_M: </span><span class="k">$(</span>CFLAG_M<span class="k">)</span><span class="s2">&#34;</span>  <span class="c1"># CFLAG_O 生成依赖信息文件的选项参数（如：-MM -I./usr/）</span>

</code></pre></td></tr></table>
</div>
</div><p>◆◆【脚本命令操作】</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">####################################################</span>
<span class="c1"># 在[shell]中进入[Makefile]所在的目录，输入命令执行：</span>
<span class="c1">####################################################</span>
make <span class="nb">echo</span>  <span class="c1"># 执行查看变量（同时创建所需文件夹）</span>
make all   <span class="c1"># 执行编译操作</span>
make clean <span class="c1"># 执行清除操作（同时创建所需文件夹）</span>

</code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th style="text-align:left">补充说明：</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1、在 Windows 系统测试时出现了小插曲，每次编译都会重新生成执行文件，困扰了我一天！后来发现是编译器自动为执行文件增加“.exe”扩展名，而 Makefile 指出最终生成的执行文件是一个没有扩展名的文件，所以 make 认为没有生成最终执行文件要重新生成！解决：Makefile 指出最终生成的执行文件加上“.exe”扩展名即可。</td>
</tr>
<tr>
<td style="text-align:left">2、在 Windows 系统运行 Makefile ，需要使用【<a href="http://tdm-gcc.tdragon.net" target="_blank" rel="noopener noreffer">TDM-GCC</a>】提供的 make 和 gcc 工具（注：make 命令改名为<code>mingw32-make</code>），以及使用【<a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreffer">git</a>】提供的命令窗口运行（其集成 linux 基本命令工具）。</td>
</tr>
</tbody>
</table>
</details>  
<details close=""><summary>3.9.2、【写法二】</summary>  
<blockquote>
<p><strong>写法二</strong>：使用多个子 Makefile 编译工程，支持为一些模块定制编译参数，适合一些中大型的项目工程。（<a href="https://github.com/o2ospring/makefile_demo" target="_blank" rel="noopener noreffer">展示例子：3_large</a>）</p>
</blockquote>
<p>◆◆【脚本剧情主线】</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="err">1、与【写法一】没有本质区别，只是把一个</span> <span class="err">Makefile</span> <span class="err">分为多个子</span> <span class="err">Makefile</span> <span class="err">操作；</span>
<span class="err">1、通过父</span> <span class="err">Makefile</span> <span class="err">调用各个子</span> <span class="err">Makefile（注：生成执行文件的子</span> <span class="err">Makefile</span> <span class="err">须最后调用）；</span>
<span class="err">2、将多个</span> <span class="err">Makefile</span> <span class="err">脚本的公共代码分别移到[makecore.mk]和[makeenvi.mk]两个文件；</span>
<span class="err">3、因多个</span> <span class="err">Makefile</span> <span class="err">文件都会生成一个最终文件，及一个项目工程只能生成一个执行文件，</span>
 　<span class="err">则要求：只能一个子</span> <span class="err">Makefile</span> <span class="err">生成执行文件，其它子</span> <span class="err">Makefile</span> <span class="err">生成库文件；</span>
</code></pre></td></tr></table>
</div>
</div><p>◆①【父 Makefile】</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="k">export </span><span class="nv">ROOT</span> <span class="o">=</span> <span class="k">$(</span>realpath .<span class="k">)</span>
<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span> <span class="n">clean</span> <span class="n">echo</span>
<span class="err">include</span> <span class="err">makeenvi.mk</span>

<span class="c">####################################################
</span><span class="c"># 1、定义子 Makefile 文件所在路径。【多个用空格分隔】
</span><span class="c">####################################################
</span><span class="c"></span>
<span class="c"># 注意: 唯一生成执行文件的子 Makefile 必须放到最后面
</span><span class="c"></span><span class="nv">MAKEFILE_D</span> <span class="o">=</span> modules/delay                         <span class="se">\
</span><span class="se"></span>             app

<span class="c">####################################################
</span><span class="c"># 2、整理子 Makefile 文件路径信息。通过几个函数整理
</span><span class="c">#    为方便之后生成命令字符串准备，例如整理为：
</span><span class="c">#    cd modules/crc// cd app//
</span><span class="c">####################################################
</span><span class="c"></span>
<span class="nv">MAKEFILE_CALL</span> <span class="o">:=</span> <span class="k">$(</span>addsuffix /,<span class="k">$(</span>MAKEFILE_D<span class="k">))</span>
<span class="nv">MAKEFILE_CALL</span> <span class="o">:=</span> <span class="k">$(</span>subst //,/,<span class="k">$(</span>MAKEFILE_CALL<span class="k">))</span>
<span class="nv">MAKEFILE_CALL</span> <span class="o">:=</span> <span class="k">$(</span>addsuffix /,<span class="k">$(</span>MAKEFILE_CALL<span class="k">))</span>
<span class="nv">MAKEFILE_CALL</span> <span class="o">:=</span> <span class="k">$(</span>addprefix cd////,<span class="k">$(</span>MAKEFILE_CALL<span class="k">))</span>
<span class="nv">MAKEFILE_CALL</span> <span class="o">:=</span> <span class="k">$(</span>subst cd////,@cd ,<span class="k">$(</span>MAKEFILE_CALL<span class="k">))</span>
<span class="c"># 定义【换行+Tab格】
</span><span class="c"></span><span class="err">define</span> <span class="err">LFTAB</span>


<span class="err">endef</span>

<span class="c">####################################################
</span><span class="c"># 3、调用子 Makefile 文件执行命令。使用字符串函数的
</span><span class="c">#    替换功能生成对应的命令字符串，例如生成为：
</span><span class="c">#    @cd modules/crc &amp;&amp; $(MAKE) all
</span><span class="c">#    @cd app         &amp;&amp; $(MAKE) all
</span><span class="c">####################################################
</span><span class="c"></span>
<span class="nf">all</span><span class="o">:</span>
	<span class="k">$(</span>subst //, <span class="o">&amp;&amp;</span> <span class="k">$(</span>MAKE<span class="k">)</span> all<span class="k">$(</span>LFTAB<span class="k">)</span>,<span class="k">$(</span>MAKEFILE_CALL<span class="k">))</span>
	@echo <span class="s2">&#34;+-----o2ospring-------------+&#34;</span>
	@echo <span class="s2">&#34;| :-) completed.            |&#34;</span>
	@echo <span class="s2">&#34;+---------------------------+&#34;</span>

<span class="nf">clean</span><span class="o">:</span>
	<span class="k">$(</span>subst //, <span class="o">&amp;&amp;</span> <span class="k">$(</span>MAKE<span class="k">)</span> clean<span class="k">$(</span>LFTAB<span class="k">)</span>,<span class="k">$(</span>MAKEFILE_CALL<span class="k">))</span>

<span class="nf">echo</span><span class="o">:</span>
	<span class="k">$(</span>subst //, <span class="o">&amp;&amp;</span> <span class="k">$(</span>MAKE<span class="k">)</span> echo<span class="k">$(</span>LFTAB<span class="k">)</span>,<span class="k">$(</span>MAKEFILE_CALL<span class="k">))</span>

</code></pre></td></tr></table>
</div>
</div><p>◆②【子 Makefile】生成执行文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c">####################################################
</span><span class="c"># 1、配置编译相关参数、编译文件(夹)、目标及中间文件
</span><span class="c">####################################################
</span><span class="c"></span>
<span class="c"># 定义生成目标，包括其路径及文件名【只能是一个对象】
</span><span class="c"></span><span class="nv">TARGET</span> <span class="o">=</span> ../build/objs/app.exe

<span class="c"># 定义中间文件夹，用于存放中间文件【只能是一个对象】
</span><span class="c"></span><span class="nv">OBJS_D</span> <span class="o">=</span> ../build/objs

<span class="c"># 添加编译源文件，包括路径及文件名【多个用空格分隔】
</span><span class="c"></span><span class="nv">SRCS_F</span> <span class="o">=</span> ../app/main.c                            <span class="se">\
</span><span class="se"></span>         ../usr/hello.c                           <span class="se">\
</span><span class="se"></span>         ../usr/test.c

<span class="c"># 添加编译文件夹，要指定文件扩展名【多个用空格分隔】
</span><span class="c"></span><span class="nv">SRCS_D</span> <span class="o">=</span> ../modules/led/*.c

<span class="c"># 添加编译库文件，包括路径及文件名【多个用空格分隔】
</span><span class="c"></span><span class="nv">LIBS</span>   <span class="o">=</span> ../build/libs/delay.a

<span class="c"># 添加源码文件及包含文件所在的路径【多个用空格分隔】
</span><span class="c"></span><span class="nv">VPATH</span>  <span class="o">=</span> ../app                                   <span class="se">\
</span><span class="se"></span>         ../usr/                                  <span class="se">\
</span><span class="se"></span>         ../modules/led/                          <span class="se">\
</span><span class="se"></span>         ../modules/delay

<span class="c"># 定义编译器及其环境相关参数
</span><span class="c"></span><span class="err">include</span> <span class="err">../makeenvi.mk</span>
<span class="nv">CFLAG_O</span> <span class="o">+=</span> -W -Wall

<span class="c"># 包含[Makefile]脚本公共代码
</span><span class="c"></span><span class="err">include</span> <span class="err">../makecore.mk</span>

</code></pre></td></tr></table>
</div>
</div><p>◆③【子 Makefile】生成库文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c">####################################################
</span><span class="c"># 1、配置编译相关参数、编译文件(夹)、目标及中间文件
</span><span class="c">####################################################
</span><span class="c"></span>
<span class="c"># 定义生成文件，包括其路径及文件名【只能是一个对象】
</span><span class="c"></span><span class="nv">LIB</span>    <span class="o">=</span> ../../build/libs/delay.a

<span class="c"># 定义中间文件夹，用于存放中间文件【只能是一个对象】
</span><span class="c"></span><span class="nv">OBJS_D</span> <span class="o">=</span> ../../build/objs

<span class="c"># 添加编译源文件，包括路径及文件名【多个用空格分隔】
</span><span class="c"></span><span class="nv">SRCS_F</span> <span class="o">=</span> delay.c

<span class="c"># 添加编译文件夹，要指定文件扩展名【多个用空格分隔】
</span><span class="c"></span><span class="nv">SRCS_D</span> <span class="o">=</span> 

<span class="c"># 添加编译库文件，包括路径及文件名【多个用空格分隔】
</span><span class="c"></span><span class="nv">LIBS</span>   <span class="o">=</span> 

<span class="c"># 添加源码文件及包含文件所在的路径【多个用空格分隔】
</span><span class="c"></span><span class="nv">VPATH</span>  <span class="o">=</span> 

<span class="c"># 定义编译器及其环境相关参数
</span><span class="c"></span><span class="err">include</span> <span class="err">../../makeenvi.mk</span>
<span class="nv">CFLAG_O</span> <span class="o">+=</span> -W -Wall -O1

<span class="c"># 包含[Makefile]脚本公共代码
</span><span class="c"></span><span class="err">include</span> <span class="err">../../makecore.mk</span>

</code></pre></td></tr></table>
</div>
</div><p>◆④【Makefile 公共代码】环境相关参数</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c">####################################################
</span><span class="c"># 1、定义编译器及环境相关参数，方便不同环境/平台移植
</span><span class="c">####################################################
</span><span class="c"></span>
<span class="nv">CC</span> <span class="o">=</span> gcc
<span class="nv">AR</span> <span class="o">=</span> ar
<span class="nv">RM</span> <span class="o">=</span> rm
<span class="nv">CFLAG_L</span> <span class="o">=</span> 
<span class="nv">CFLAG_O</span> <span class="o">=</span> -c
<span class="nv">CFLAG_M</span> <span class="o">=</span> -MMD -MP -MF<span class="s2">&#34;</span><span class="k">$(</span>@:%.o<span class="o">=</span>%.d<span class="k">)</span><span class="s2">&#34;</span>
<span class="nv">ARFLAGS</span> <span class="o">=</span> rcs
<span class="nv">RMFLAGS</span> <span class="o">=</span> -fr
<span class="nv">MKDIR</span>   <span class="o">=</span> mkdir -p
<span class="c">#ECHO_SET = @set -e
</span><span class="c">#ECHO_END = 
</span><span class="c"></span><span class="err">ifdef</span> <span class="err">VPATH</span>
<span class="nv">SRCS_INC</span> <span class="o">:=</span> <span class="k">$(</span>addprefix -I,<span class="k">$(</span>strip <span class="k">$(</span>VPATH<span class="k">)))</span>
<span class="err">endif</span>

</code></pre></td></tr></table>
</div>
</div><p>◆⑤【Makefile 公共代码】编译核心代码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c">####################################################
</span><span class="c"># 2、根据上面的相关配置，生成包括路径的相关文件对象
</span><span class="c">####################################################
</span><span class="c"></span>
<span class="nv">VPATH</span> <span class="o">:=</span> <span class="k">$(</span>addsuffix /,<span class="k">$(</span>VPATH<span class="k">))</span>
<span class="nv">VPATH</span> <span class="o">:=</span> <span class="k">$(</span>subst //,/,<span class="k">$(</span>VPATH<span class="k">))</span>
<span class="nv">SRCS_INC</span> <span class="o">:=</span> <span class="k">$(</span>addsuffix /,<span class="k">$(</span>SRCS_INC<span class="k">))</span>
<span class="nv">SRCS_INC</span> <span class="o">:=</span> <span class="k">$(</span>subst //,/,<span class="k">$(</span>SRCS_INC<span class="k">))</span>
<span class="nv">OBJS_D</span> <span class="o">:=</span> <span class="k">$(</span>addsuffix /,<span class="k">$(</span>OBJS_D<span class="k">))</span>
<span class="nv">OBJS_D</span> <span class="o">:=</span> <span class="k">$(</span>subst //,/,<span class="k">$(</span>OBJS_D<span class="k">))</span>
<span class="nv">DEPS_D</span> <span class="o">:=</span> <span class="k">$(</span>OBJS_D<span class="k">)</span>
<span class="nv">DIRS</span> <span class="o">:=</span> <span class="k">$(</span>sort <span class="k">$(</span>OBJS_D<span class="k">)</span> <span class="k">$(</span>dir <span class="k">$(</span>TARGET<span class="k">))</span> <span class="k">$(</span>dir <span class="k">$(</span>LIB<span class="k">)))</span>
<span class="nv">SRCS</span> <span class="o">:=</span> <span class="k">$(</span>filter %.c, <span class="k">$(</span>SRCS_F<span class="k">)</span> <span class="k">$(</span>wildcard <span class="k">$(</span>SRCS_D<span class="k">)))</span>
<span class="nv">OBJS</span> <span class="o">:=</span> <span class="k">$(</span>SRCS:.c<span class="o">=</span>.o<span class="k">)</span>
<span class="nv">OBJS</span> <span class="o">:=</span> <span class="k">$(</span>addprefix <span class="k">$(</span>OBJS_D<span class="k">)</span>,<span class="k">$(</span>notdir <span class="k">$(</span>OBJS<span class="k">)))</span>
<span class="nv">DEPS</span> <span class="o">:=</span> <span class="k">$(</span>SRCS:.c<span class="o">=</span>.d<span class="k">)</span>
<span class="nv">DEPS</span> <span class="o">:=</span> <span class="k">$(</span>addprefix <span class="k">$(</span>OBJS_D<span class="k">)</span>,<span class="k">$(</span>notdir <span class="k">$(</span>DEPS<span class="k">)))</span>
<span class="nv">OBJX</span> <span class="o">:=</span> <span class="k">$(</span>sort <span class="k">$(</span>OBJS<span class="k">)</span> <span class="k">$(</span>DEPS<span class="k">)</span> <span class="k">$(</span>addsuffix .tmp,<span class="k">$(</span>DEPS<span class="k">)))</span>
<span class="nv">LIBS</span> <span class="o">:=</span> <span class="k">$(</span>sort <span class="k">$(</span>LIBS<span class="k">))</span>

<span class="err">ifdef</span> <span class="err">VPATH</span>
<span class="nv">CFLAG_O</span> <span class="o">+=</span> <span class="k">$(</span>SRCS_INC<span class="k">)</span>
<span class="c">#CFLAG_M += $(SRCS_INC)
</span><span class="c"></span><span class="err">endif</span>

<span class="c">####################################################
</span><span class="c"># 3、执行创建文件夹、生成依赖、编译、删除等相关操作
</span><span class="c">####################################################
</span><span class="c"></span>
<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span> <span class="n">clean</span> <span class="n">echo</span>

<span class="err">ifdef</span> <span class="err">TARGET</span>
<span class="nf">all</span><span class="o">:</span> <span class="k">$(</span><span class="nv">TARGET</span><span class="k">)</span>
<span class="err">endif</span>

<span class="err">ifdef</span> <span class="err">LIB</span>
<span class="nf">all</span><span class="o">:</span> <span class="k">$(</span><span class="nv">LIB</span><span class="k">)</span>
<span class="err">endif</span>

<span class="c"># 非执行&#34;clean/echo&#34;才包含
</span><span class="c"></span><span class="err">ifneq</span> <span class="err">(</span><span class="k">$(</span><span class="nv">MAKECMDGOALS</span><span class="k">)</span><span class="err">,clean)</span>
<span class="err">ifneq</span> <span class="err">(</span><span class="k">$(</span><span class="nv">MAKECMDGOALS</span><span class="k">)</span><span class="err">,echo)</span>
<span class="err">-include</span> <span class="k">$(</span><span class="nv">DEPS</span><span class="k">)</span>
<span class="err">endif</span>
<span class="err">endif</span>

<span class="c"># 编译出最终执行文件
</span><span class="c"></span><span class="err">ifdef</span> <span class="err">TARGET</span>
<span class="nf">$(TARGET)</span><span class="o">:</span> <span class="k">$(</span><span class="nv">OBJS</span><span class="k">)</span> <span class="k">$(</span><span class="nv">LIBS</span><span class="k">)</span>
	@echo <span class="s2">&#34;[2]making </span><span class="nv">$@</span><span class="s2">...&#34;</span>
	@<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAG_L<span class="k">)</span> -o <span class="nv">$@</span> <span class="k">$(</span>filter %.o, $^<span class="k">)</span> <span class="k">$(</span>LIBS<span class="k">)</span>
<span class="err">endif</span>

<span class="c"># 打包生成静态库文件
</span><span class="c"></span><span class="err">ifdef</span> <span class="err">LIB</span>
<span class="nf">$(LIB)</span><span class="o">:</span> <span class="k">$(</span><span class="nv">OBJS</span><span class="k">)</span>
	@echo <span class="s2">&#34;[2]making </span><span class="nv">$@</span><span class="s2">...&#34;</span>
	@<span class="k">$(</span>AR<span class="k">)</span> <span class="k">$(</span>ARFLAGS<span class="k">)</span> <span class="nv">$@</span> <span class="k">$(</span>filter %.o, $^<span class="k">)</span>
<span class="err">endif</span>

<span class="c"># 编译出中间目标文件
</span><span class="c"></span><span class="nf">$(OBJS_D)%.o</span><span class="o">:</span> %.<span class="n">c</span>
	@echo <span class="s2">&#34;[1]making </span><span class="nv">$@</span><span class="s2">...&#34;</span>
	@<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAG_O<span class="k">)</span> <span class="k">$(</span>CFLAG_M<span class="k">)</span> $&lt; -o <span class="nv">$@</span>

<span class="c"># 清除目标及执行文件
</span><span class="c"></span><span class="nf">clean</span><span class="o">:</span>
	<span class="k">$(</span>MKDIR<span class="k">)</span> <span class="k">$(</span>DIRS<span class="k">)</span>
	<span class="k">$(</span>RM<span class="k">)</span> <span class="k">$(</span>RMFLAGS<span class="k">)</span> <span class="k">$(</span>OBJX<span class="k">)</span> <span class="k">$(</span>LIB<span class="k">)</span> <span class="k">$(</span>TARGET<span class="k">)</span>

<span class="c"># 查看变量对象相关值
</span><span class="c"></span><span class="nf">echo</span><span class="o">:</span>
	<span class="k">$(</span>MKDIR<span class="k">)</span> <span class="k">$(</span>DIRS<span class="k">)</span>
	@echo <span class="s2">&#34;VPATH: </span><span class="k">$(</span>VPATH<span class="k">)</span><span class="s2">&#34;</span>         <span class="c1"># VPATH 为[make]工具增加搜索目录</span>
	@echo <span class="s2">&#34;DIRS: </span><span class="k">$(</span>DIRS<span class="k">)</span><span class="s2">&#34;</span>           <span class="c1"># DIRS 为编译过程需要创建的文件夹（如：build/）</span>
	@echo <span class="s2">&#34;SRCS: </span><span class="k">$(</span>SRCS<span class="k">)</span><span class="s2">&#34;</span>           <span class="c1"># SRCS 为全部源码文件及其路径    （如：usr/hello.c）</span>
	@echo <span class="s2">&#34;OBJS: </span><span class="k">$(</span>OBJS<span class="k">)</span><span class="s2">&#34;</span>           <span class="c1"># OBJS 为全部中间目标文件及其路径（如：build/hello.o）</span>
	@echo <span class="s2">&#34;DEPS: </span><span class="k">$(</span>DEPS<span class="k">)</span><span class="s2">&#34;</span>           <span class="c1"># DEPS 为全部依赖信息文件及其路径(源码文件包含其它文件的信息)（如：build/hello.d）</span>
	@echo <span class="s2">&#34;OBJX: </span><span class="k">$(</span>OBJX<span class="k">)</span><span class="s2">&#34;</span>           <span class="c1"># OBJX 为所有中间文件及其路径(包括：OBJS 和 DEPS)</span>
	@echo <span class="s2">&#34;LIBS: </span><span class="k">$(</span>LIBS<span class="k">)</span><span class="s2">&#34;</span>           <span class="c1"># LIBS 为编译包含的库文件及其路径（如：build/abc.a）</span>
	@echo <span class="s2">&#34;CFLAG_O: </span><span class="k">$(</span>CFLAG_O<span class="k">)</span><span class="s2">&#34;</span>     <span class="c1"># CFLAG_O 编译中间目标文件的选项参数（如：-c -I./usr/）</span>
	@echo <span class="s2">&#34;CFLAG_M: </span><span class="k">$(</span>CFLAG_M<span class="k">)</span><span class="s2">&#34;</span>     <span class="c1"># CFLAG_O 生成依赖信息文件的选项参数（如：-MM -I./usr/）</span>
	@echo <span class="s2">&#34;-------------------&#34;</span>

</code></pre></td></tr></table>
</div>
</div><p>◆◆【脚本命令操作】</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">####################################################</span>
<span class="c1"># 在[shell]中进入[makecore.mk]所在的目录，输入命令执行：</span>
<span class="c1">####################################################</span>
make <span class="nb">echo</span>         <span class="c1"># 执行查看变量（同时创建所需文件夹）</span>
make all          <span class="c1"># 执行编译操作</span>
make clean        <span class="c1"># 执行清除操作（同时创建所需文件夹）</span>

</code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th style="text-align:left">补充说明：</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1、在 Windows 系统测试时出现了小插曲，每次编译都会重新生成执行文件，困扰了我一天！后来发现是编译器自动为执行文件增加“.exe”扩展名，而 Makefile 指出最终生成的执行文件是一个没有扩展名的文件，所以 make 认为没有生成最终执行文件要重新生成！解决：Makefile 指出最终生成的执行文件加上“.exe”扩展名即可。</td>
</tr>
<tr>
<td style="text-align:left">2、在 Windows 系统运行 Makefile ，需要使用【<a href="http://tdm-gcc.tdragon.net" target="_blank" rel="noopener noreffer">TDM-GCC</a>】提供的 make 和 gcc 工具（注：make 命令改名为<code>mingw32-make</code>），以及使用【<a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreffer">git</a>】提供的命令窗口运行（其集成 linux 基本命令工具）。</td>
</tr>
</tbody>
</table>
</details>  
<details close=""><summary>3.9.3、【案例三】</summary>  
<blockquote>
<p><strong>案例三</strong>：基于【写法二】应用于【STM32F103】单片机工程。（<a href="https://github.com/o2ospring/makefile_demo" target="_blank" rel="noopener noreffer">展示例子：4_stm32f1xx</a>）</p>
</blockquote>
<p>说明：具体请阅读《<a href="../20220804" rel="">linux-STM32F开发-makefile 构建与使用</a>》，可以进一步了解一些编译参数、链接脚本、生成的几种执行文件，以及交叉编译器的一些工具！</p>
</details>  
<details close=""><summary>3.9.4、【说明四】</summary>  
<blockquote>
<p><strong>说明四</strong>：关于依赖关系信息生成方法，原来设计使用<code>-MM</code>参数生成，现在改为<code>-MMD</code>参数生成！原因：因为使用<code>-MM</code>参数方式时，每编译一个文件会多运行一次 gcc 和调用一次 sed 处理文本，效率会低很多，而且一些平台可能没有 sed 工具！</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c"># 【旧方法】生成代码依赖信息
</span><span class="c"></span><span class="nf">%.d</span><span class="o">:</span> %.<span class="n">c</span>
	@set -e<span class="p">;</span> <span class="se">\
</span><span class="se"></span>	rm -fr <span class="nv">$@</span>.tmp<span class="p">;</span> <span class="se">\
</span><span class="se"></span>	gcc -E -MM $&lt; &gt; <span class="nv">$@</span>.tmp<span class="p">;</span> <span class="se">\
</span><span class="se"></span>	sed <span class="s1">&#39;s,\(.*\)\.o[ :]*,$(dir $@)\1.o $@: ,g&#39;</span> &lt; <span class="nv">$@</span>.tmp &gt; <span class="nv">$@</span><span class="p">;</span> <span class="se">\
</span><span class="se"></span>	rm -fr <span class="nv">$@</span>.tmp

<span class="c"># 【新方法】编译出中间目标文件，同时生成代码依赖信息（备注：Windows 下`-MF`使用绝对路径时会出错！）
</span><span class="c"></span><span class="nf">%.o</span><span class="o">:</span> %.<span class="n">c</span>
	gcc -c -MMD -MP -MF<span class="s2">&#34;</span><span class="k">$(</span>@:%.o<span class="o">=</span>%.d<span class="k">)</span><span class="s2">&#34;</span> $&lt; -o <span class="nv">$@</span>

</code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th style="text-align:left">特别备注：</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1、在脚本中使用<code>sed</code>工具进行相关操作：从临时文件【$@.tmp】(如: main.d.tmp) 读出内容，对某段文本进行替换后以写覆盖方式保存到文件【$@】(如: main.d)。替换文本内容案例: 【main.o: 】替换为【build/main.o build/main.d: 】。其替换语法为正则表达式，相关知识请移步《<a href="../20220527" rel="">正则表达式 regex</a>》了解。</td>
</tr>
</tbody>
</table>
</details>  
</details>  
</details>  
<h3 id="四相关的编译构建工具">四、相关的编译构建工具</h3>
<p><a href="https://cmake.org/" title="cmake 是一个跨平台的 Makefile 生成工具！以 CMakeLists.txt 组织描述，输出 makefile 或者 project 文件。" target="_blank" rel="noopener noreffer">CMake</a><br>
<a href="https://doc.qt.io/qt-5/qmake-manual.html" title="qmake 是 Qt 的构建工具，主要作用是解析 pro 格式的项目文件、生成编译 Makefiles 等。" target="_blank" rel="noopener noreffer">Qmake</a><br>
<a href="https://xmake.io/" target="_blank" rel="noopener noreffer">XMake</a><br>
<a href="https://mesonbuild.com/" target="_blank" rel="noopener noreffer">Meson</a><br>
<a href="https://www.scons.org/" target="_blank" rel="noopener noreffer">SCons</a><br>
<a href="https://www.busybox.net/" title="BusyBox 是一个集成了约 400 个最常用 Linux/UNIX 命令和工具的软件，并且对相关软件进行精简。它为任何小型或嵌入式系统提供了一个相当完整的环境。" target="_blank" rel="noopener noreffer">BusyBox</a><br>
<a href="https://www.gnu.org/" title="Autotools 用来制作一个符合所有 GNU 标准的软件包" target="_blank" rel="noopener noreffer">Autotools</a><br>
待续……</p>
<!--  
[如何评价 xmake？](https://www.zhihu.com/question/56634628)  
[STM32高级开发(5)-gcc-arm-none-eabi](https://blog.csdn.net/zhengyangliu123/article/details/54783443/)  
[STM32中的链接器脚本文件(.ld文件)与启动文件(.s文件)的相关知识整理](https://blog.csdn.net/laifengyuan1/article/details/108725266)  
[linux安装gcc-arm-none-eabi](https://blog.csdn.net/xingqingly/article/details/78112125)  
[Ubuntu系统环境变量详解](http://www.linuxidc.com/Linux/2016-09/135476.htm)  
[Makefile ar 用法](https://blog.csdn.net/hyl999/article/details/108642313)  
[操作前创建文件夹](https://www.orcode.com/question/438856_k2f6e4.html)  
-->  
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2022-07-17</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://o2ospring.github.io/20200915/" data-title="linux 编译构建工具" data-hashtags="编译,GNU,GCC,linux 工具/应用"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://o2ospring.github.io/20200915/" data-hashtag="编译"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://o2ospring.github.io/20200915/" data-title="linux 编译构建工具"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://o2ospring.github.io/20200915/" data-title="linux 编译构建工具"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://o2ospring.github.io/20200915/" data-title="linux 编译构建工具"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/%E7%BC%96%E8%AF%91/">编译</a>,&nbsp;<a href="/tags/gnu/">GNU</a>,&nbsp;<a href="/tags/gcc/">GCC</a>,&nbsp;<a href="/tags/linux-%E5%B7%A5%E5%85%B7/%E5%BA%94%E7%94%A8/">linux 工具/应用</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/20200913/" class="prev" rel="prev" title="面向对象的 C 语言实现方法"><i class="fas fa-angle-left fa-fw"></i>面向对象的 C 语言实现方法</a>
            <a href="/20200916/" class="next" rel="next" title="linux 调试仿真工具">linux 调试仿真工具<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.92.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2018 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">o2ospring</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><script type="text/javascript" src="/lib/valine/Valine.min.js"></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/algoliasearch/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":200},"comment":{"valine":{"appId":"7V3yo7ajOCbagfd7KIdmkAiw-gzGzoHsz","appKey":"IpKMeGrJVzTvAAkTiXEMiElK","avatar":"mp","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@5.0.1/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"zh-cn","pageSize":10,"placeholder":"你的评论 ...","recordIP":true,"visitor":true}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"algoliaAppID":"AU15Z1TOUX","algoliaIndex":"o2ospring_blog_index","algoliaSearchKey":"79710701e46d916e0897c7b7dfe0a497","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
